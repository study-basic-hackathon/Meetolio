{"ast":null,"code":"import _objectSpread from\"/Users/takahiro/Dev/webhack/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from\"react\";import{useNavigate}from\"react-router-dom\";import{useAuth}from\"../contexts/AuthContext\";import{Stage,Layer,Rect,Text,Transformer,Circle,Line,Group}from\"react-konva\";import\"./BusinessCardDesign.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const BusinessCardDesign=()=>{const{user,isAuthenticated}=useAuth();const navigate=useNavigate();const[profile,setProfile]=useState(null);const[isLoading,setIsLoading]=useState(true);const[currentSide,setCurrentSide]=useState(\"front\");const[elements,setElements]=useState([]);const[selectedId,setSelectedId]=useState(null);const[editingText,setEditingText]=useState(\"\");const[fontSize,setFontSize]=useState(16);const[textColor,setTextColor]=useState(\"#000000\");const[fontFamily,setFontFamily]=useState(\"Arial\");const[currentTool,setCurrentTool]=useState(\"select\");const[showGrid,setShowGrid]=useState(false);const[showGuidelines,setShowGuidelines]=useState(true);const[history,setHistory]=useState([]);const[historyIndex,setHistoryIndex]=useState(-1);const[showTextModal,setShowTextModal]=useState(false);const[selectedTextStyle,setSelectedTextStyle]=useState(\"body\");const transformerRef=useRef(null);const stageRef=useRef(null);useEffect(()=>{if(!isAuthenticated){navigate(\"/login\");return;}// モックプロフィールデータを取得\nconst mockProfile={id:\"1\",userId:(user===null||user===void 0?void 0:user.id)||\"1\",company:\"テック株式会社\",jobTitle:\"フロントエンドエンジニア\",bio:\"Web開発に携わって5年目です。React、TypeScript、Node.jsを中心に開発を行っています。ユーザビリティを重視した設計を心がけています。\",skills:[\"React\",\"TypeScript\",\"Node.js\",\"CSS\",\"HTML\",\"JavaScript\",\"Git\",\"AWS\"],interests:[\"プログラミング\",\"読書\",\"旅行\",\"料理\",\"音楽\"],contactInfo:{email:\"taro.tech@example.com\",phone:\"090-1234-5678\",sns:{twitter:\"taro_tech\",linkedin:\"taro-tech\",github:\"taro-tech\",instagram:\"taro_tech_dev\"},website:\"https://taro-tech.dev\"},isPublic:true,createdAt:new Date(\"2024-01-01\"),updatedAt:new Date()};setProfile(mockProfile);setIsLoading(false);},[isAuthenticated,user,navigate]);// 初期テキスト要素を設定\nuseEffect(()=>{if(profile){const initialElements=currentSide===\"front\"?[{id:\"company\",type:\"text\",text:profile.company||\"会社名\",x:200,y:60,fontSize:18,fontFamily:\"Arial\",fill:\"#000000\",width:400,align:\"center\",draggable:true,textStyle:\"heading\"},{id:\"jobTitle\",type:\"text\",text:profile.jobTitle||\"役職\",x:200,y:90,fontSize:14,fontFamily:\"Arial\",fill:\"#666666\",width:400,align:\"center\",draggable:true,textStyle:\"subheading\"},{id:\"name\",type:\"text\",text:(user===null||user===void 0?void 0:user.name)||\"氏名\",x:200,y:120,fontSize:16,fontFamily:\"Arial\",fill:\"#000000\",width:400,align:\"center\",draggable:true,textStyle:\"body\"}]:[{id:\"email\",type:\"text\",text:profile.contactInfo.email||\"メールアドレス\",x:200,y:80,fontSize:12,fontFamily:\"Arial\",fill:\"#000000\",width:400,align:\"center\",draggable:true,textStyle:\"body\"},{id:\"phone\",type:\"text\",text:profile.contactInfo.phone||\"電話番号\",x:200,y:110,fontSize:12,fontFamily:\"Arial\",fill:\"#000000\",width:400,align:\"center\",draggable:true,textStyle:\"body\"},{id:\"website\",type:\"text\",text:profile.contactInfo.website||\"ウェブサイト\",x:200,y:140,fontSize:12,fontFamily:\"Arial\",fill:\"#000000\",width:400,align:\"center\",draggable:true,textStyle:\"body\"}];setElements(initialElements);// eslint-disable-next-line react-hooks/exhaustive-deps\naddToHistory(initialElements);}},[profile,currentSide,user]);// 選択された要素のTransformerを更新\nuseEffect(()=>{if(selectedId&&transformerRef.current){var _stageRef$current;const node=(_stageRef$current=stageRef.current)===null||_stageRef$current===void 0?void 0:_stageRef$current.findOne(\"#\".concat(selectedId));if(node){var _transformerRef$curre;transformerRef.current.nodes([node]);(_transformerRef$curre=transformerRef.current.getLayer())===null||_transformerRef$curre===void 0?void 0:_transformerRef$curre.batchDraw();}}},[selectedId]);// 履歴管理\nconst addToHistory=newElements=>{const newHistory=history.slice(0,historyIndex+1);newHistory.push([...newElements]);setHistory(newHistory);setHistoryIndex(newHistory.length-1);};const undo=()=>{if(historyIndex>0){const newIndex=historyIndex-1;setHistoryIndex(newIndex);setElements([...history[newIndex]]);}};const redo=()=>{if(historyIndex<history.length-1){const newIndex=historyIndex+1;setHistoryIndex(newIndex);setElements([...history[newIndex]]);}};const moveElement=(id,direction)=>{const newElements=[...elements];const currentIndex=newElements.findIndex(el=>el.id===id);if(direction===\"forward\"&&currentIndex<newElements.length-1){[newElements[currentIndex],newElements[currentIndex+1]]=[newElements[currentIndex+1],newElements[currentIndex]];}else if(direction===\"backward\"&&currentIndex>0){[newElements[currentIndex],newElements[currentIndex-1]]=[newElements[currentIndex-1],newElements[currentIndex]];}setElements(newElements);addToHistory(newElements);};const alignElements=alignment=>{if(selectedId){const selectedElement=elements.find(el=>el.id===selectedId);if(!selectedElement)return;const newElements=elements.map(el=>{if(el.id===selectedId){const newEl=_objectSpread({},el);switch(alignment){case\"left\":newEl.x=50;break;case\"center\":newEl.x=200;break;case\"right\":newEl.x=350;break;case\"top\":newEl.y=50;break;case\"middle\":newEl.y=121;break;case\"bottom\":newEl.y=192;break;}return newEl;}return el;});setElements(newElements);addToHistory(newElements);}};const handleTextClick=id=>{setSelectedId(id);const element=elements.find(el=>el.id===id);if(element&&element.type===\"text\"){setEditingText(element.text);setSelectedTextStyle(element.textStyle||\"body\");setShowTextModal(true);}};const handleTextEdit=(id,newText)=>{const newElements=elements.map(el=>el.id===id&&el.type===\"text\"?_objectSpread(_objectSpread({},el),{},{text:newText}):el);setElements(newElements);addToHistory(newElements);setEditingText(\"\");};const handleElementUpdate=(id,updates)=>{const newElements=elements.map(el=>el.id===id?_objectSpread(_objectSpread({},el),updates):el);setElements(newElements);addToHistory(newElements);};const handleAddText=function(){let style=arguments.length>0&&arguments[0]!==undefined?arguments[0]:\"body\";let fontSize=16;let y=100;switch(style){case\"heading\":fontSize=24;y=80;break;case\"subheading\":fontSize=18;y=110;break;case\"body\":fontSize=14;y=140;break;}const newText={id:\"text-\".concat(Date.now()),type:\"text\",text:style===\"heading\"?\"見出し\":style===\"subheading\"?\"小見出し\":\"本文\",x:200,y:y,fontSize:fontSize,fontFamily:fontFamily,fill:textColor,width:400,align:\"center\",draggable:true,textStyle:style};const newElements=[...elements,newText];setElements(newElements);addToHistory(newElements);setSelectedId(newText.id);setShowTextModal(true);};const handleAddShape=shapeType=>{let newShape;switch(shapeType){case\"rect\":newShape={id:\"rect-\".concat(Date.now()),type:\"rect\",x:100,y:100,width:100,height:60,fill:textColor,stroke:\"#000000\",strokeWidth:2,draggable:true};break;case\"circle\":newShape={id:\"circle-\".concat(Date.now()),type:\"circle\",x:150,y:150,radius:30,fill:textColor,stroke:\"#000000\",strokeWidth:2,draggable:true};break;case\"line\":newShape={id:\"line-\".concat(Date.now()),type:\"line\",x:100,y:100,points:[0,0,100,0],fill:\"#000000\",stroke:\"#000000\",strokeWidth:2,draggable:true};break;}const newElements=[...elements,newShape];setElements(newElements);addToHistory(newElements);setSelectedId(newShape.id);};const handleAddIcon=iconType=>{const newIcon={id:\"icon-\".concat(Date.now()),type:\"icon\",iconType,x:100,y:100,size:24,fill:textColor,draggable:true};const newElements=[...elements,newIcon];setElements(newElements);addToHistory(newElements);setSelectedId(newIcon.id);};const handleDeleteElement=()=>{if(selectedId){const newElements=elements.filter(el=>el.id!==selectedId);setElements(newElements);addToHistory(newElements);setSelectedId(null);}};const handleSave=async()=>{try{await new Promise(resolve=>setTimeout(resolve,1000));console.log(\"名刺デザインを保存しました\");console.log(\"現在の要素:\",elements);navigate(\"/business-card/edit\");}catch(error){console.error(\"名刺デザインの保存に失敗しました:\",error);}};const handleCancel=()=>{navigate(\"/business-card/edit\");};const handleExportImage=()=>{if(stageRef.current){const dataURL=stageRef.current.toDataURL();const link=document.createElement(\"a\");link.download=\"business-card-\".concat(currentSide,\".png\");link.href=dataURL;link.click();}};const renderElement=element=>{switch(element.type){case\"text\":return/*#__PURE__*/_jsx(Text,{id:element.id,text:element.text,x:element.x,y:element.y,fontSize:element.fontSize,fontFamily:element.fontFamily,fill:element.fill,align:element.align,width:element.width,draggable:element.draggable,onClick:()=>handleTextClick(element.id),onTap:()=>handleTextClick(element.id),onDragEnd:e=>{handleElementUpdate(element.id,{x:e.target.x(),y:e.target.y()});}},element.id);case\"rect\":return/*#__PURE__*/_jsx(Rect,{id:element.id,x:element.x,y:element.y,width:element.width,height:element.height,fill:element.fill,stroke:element.stroke,strokeWidth:element.strokeWidth,draggable:element.draggable,onClick:()=>setSelectedId(element.id),onTap:()=>setSelectedId(element.id),onDragEnd:e=>{handleElementUpdate(element.id,{x:e.target.x(),y:e.target.y()});}},element.id);case\"circle\":return/*#__PURE__*/_jsx(Circle,{id:element.id,x:element.x,y:element.y,radius:element.radius,fill:element.fill,stroke:element.stroke,strokeWidth:element.strokeWidth,draggable:element.draggable,onClick:()=>setSelectedId(element.id),onTap:()=>setSelectedId(element.id),onDragEnd:e=>{handleElementUpdate(element.id,{x:e.target.x(),y:e.target.y()});}},element.id);case\"line\":return/*#__PURE__*/_jsx(Line,{id:element.id,x:element.x,y:element.y,points:element.points,fill:element.fill,stroke:element.stroke,strokeWidth:element.strokeWidth,draggable:element.draggable,onClick:()=>setSelectedId(element.id),onTap:()=>setSelectedId(element.id),onDragEnd:e=>{handleElementUpdate(element.id,{x:e.target.x(),y:e.target.y()});}},element.id);case\"icon\":return/*#__PURE__*/_jsxs(Group,{id:element.id,x:element.x,y:element.y,draggable:element.draggable,onClick:()=>setSelectedId(element.id),onTap:()=>setSelectedId(element.id),onDragEnd:e=>{handleElementUpdate(element.id,{x:e.target.x(),y:e.target.y()});},children:[element.iconType===\"phone\"&&/*#__PURE__*/_jsx(Rect,{x:0,y:0,width:element.size,height:element.size*1.6,fill:element.fill}),element.iconType===\"email\"&&/*#__PURE__*/_jsx(Rect,{x:0,y:0,width:element.size,height:element.size*0.8,fill:element.fill}),element.iconType===\"website\"&&/*#__PURE__*/_jsx(Circle,{x:element.size/2,y:element.size/2,radius:element.size/2,fill:element.fill})]},element.id);default:return null;}};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"business-card-design\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u8AAD\\u307F\\u8FBC\\u307F\\u4E2D...\"})})});}if(!profile){return/*#__PURE__*/_jsx(\"div\",{className:\"business-card-design\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:\"\\u30D7\\u30ED\\u30D5\\u30A3\\u30FC\\u30EB\\u304C\\u898B\\u3064\\u304B\\u308A\\u307E\\u305B\\u3093\"})})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"business-card-design\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"design-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u540D\\u523A\\u30C7\\u30B6\\u30A4\\u30F3\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u540D\\u523A\\u306E\\u8868\\u9762\\u30FB\\u88CF\\u9762\\u3092\\u30C7\\u30B6\\u30A4\\u30F3\\u3067\\u304D\\u307E\\u3059\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"design-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"side-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"side-tab \".concat(currentSide===\"front\"?\"active\":\"\"),onClick:()=>setCurrentSide(\"front\"),children:\"\\u8868\\u9762\"}),/*#__PURE__*/_jsx(\"button\",{className:\"side-tab \".concat(currentSide===\"back\"?\"active\":\"\"),onClick:()=>setCurrentSide(\"back\"),children:\"\\u88CF\\u9762\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"canvas-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"canvas-wrapper\",children:/*#__PURE__*/_jsx(Stage,{ref:stageRef,width:400,height:242,onMouseDown:e=>{if(e.target===e.target.getStage()){setSelectedId(null);}},children:/*#__PURE__*/_jsxs(Layer,{children:[/*#__PURE__*/_jsx(Rect,{x:0,y:0,width:400,height:242,fill:\"#ffffff\",stroke:\"#e5e7eb\",strokeWidth:1}),showGrid&&/*#__PURE__*/_jsxs(_Fragment,{children:[Array.from({length:20},(_,i)=>/*#__PURE__*/_jsx(Line,{x:i*20,y:0,points:[0,0,0,242],stroke:\"#f0f0f0\",strokeWidth:1},\"grid-v-\".concat(i))),Array.from({length:13},(_,i)=>/*#__PURE__*/_jsx(Line,{x:0,y:i*20,points:[0,0,400,0],stroke:\"#f0f0f0\",strokeWidth:1},\"grid-h-\".concat(i)))]}),showGuidelines&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Line,{x:200,y:0,points:[0,0,0,242],stroke:\"#3b82f6\",strokeWidth:1,dash:[5,5]}),/*#__PURE__*/_jsx(Line,{x:0,y:121,points:[0,0,400,0],stroke:\"#3b82f6\",strokeWidth:1,dash:[5,5]})]}),elements.map(renderElement),/*#__PURE__*/_jsx(Transformer,{ref:transformerRef})]})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"bottom-toolbar\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"toolbar-scroll\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"toolbar-item\",onClick:()=>setCurrentTool(\"select\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"toolbar-icon\",children:\"\\u270B\"}),/*#__PURE__*/_jsx(\"div\",{className:\"toolbar-label\",children:\"\\u9078\\u629E\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"toolbar-item\",onClick:()=>handleAddText(\"heading\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"toolbar-icon\",children:\"T\"}),/*#__PURE__*/_jsx(\"div\",{className:\"toolbar-label\",children:\"\\u30C6\\u30AD\\u30B9\\u30C8\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"toolbar-item\",onClick:()=>handleAddShape(\"rect\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"toolbar-icon\",children:\"\\u25A1\"}),/*#__PURE__*/_jsx(\"div\",{className:\"toolbar-label\",children:\"\\u56F3\\u5F62\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"toolbar-item\",onClick:()=>handleAddIcon(\"phone\"),children:[/*#__PURE__*/_jsx(\"div\",{className:\"toolbar-icon\",children:\"\\uD83D\\uDCDE\"}),/*#__PURE__*/_jsx(\"div\",{className:\"toolbar-label\",children:\"\\u30A2\\u30A4\\u30B3\\u30F3\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"toolbar-item \".concat(historyIndex<=0?'disabled':''),onClick:historyIndex>0?undo:undefined,children:[/*#__PURE__*/_jsx(\"div\",{className:\"toolbar-icon\",children:\"\\u21B6\"}),/*#__PURE__*/_jsx(\"div\",{className:\"toolbar-label\",children:\"\\u623B\\u308B\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"toolbar-item \".concat(historyIndex>=history.length-1?'disabled':''),onClick:historyIndex<history.length-1?redo:undefined,children:[/*#__PURE__*/_jsx(\"div\",{className:\"toolbar-icon\",children:\"\\u21B7\"}),/*#__PURE__*/_jsx(\"div\",{className:\"toolbar-label\",children:\"\\u9032\\u3080\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"design-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:handleCancel,children:\"\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:handleSave,children:\"\\u30C7\\u30B6\\u30A4\\u30F3\\u3092\\u4FDD\\u5B58\"})]})]})]}),showTextModal&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",onClick:()=>setShowTextModal(false),children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",onClick:e=>e.stopPropagation(),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u30C6\\u30AD\\u30B9\\u30C8\\u7DE8\\u96C6\"}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:()=>setShowTextModal(false),children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"search-section\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"search-bar\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"search-icon\",children:\"\\uD83D\\uDD0D\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"\\u30D5\\u30A9\\u30F3\\u30C8\\u3068\\u7D44\\u307F\\u5408\\u308F\\u305B\\u3092\\u691C\\u7D22\",className:\"search-input\"})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-options\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"text-option-btn primary\",onClick:()=>handleAddText(\"heading\"),children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-icon\",children:\"T\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-label\",children:\"\\u898B\\u51FA\\u3057\\u3092\\u8FFD\\u52A0\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"text-option-btn secondary\",onClick:()=>handleAddText(\"subheading\"),children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-icon\",children:\"T\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-label\",children:\"\\u5C0F\\u898B\\u51FA\\u3057\\u3092\\u8FFD\\u52A0\"})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"text-option-btn secondary\",onClick:()=>handleAddText(\"body\"),children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-icon\",children:\"T\"}),/*#__PURE__*/_jsx(\"span\",{className:\"text-label\",children:\"\\u672C\\u6587\\u3092\\u8FFD\\u52A0\"})]})]}),selectedId&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-editor-section\",children:[/*#__PURE__*/_jsx(\"h4\",{children:\"\\u30C6\\u30AD\\u30B9\\u30C8\\u7DE8\\u96C6\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editingText,onChange:e=>setEditingText(e.target.value),onBlur:()=>handleTextEdit(selectedId,editingText),onKeyPress:e=>{if(e.key===\"Enter\"){handleTextEdit(selectedId,editingText);}},placeholder:\"\\u30C6\\u30AD\\u30B9\\u30C8\\u3092\\u5165\\u529B\",className:\"text-input\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"style-controls\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u30D5\\u30A9\\u30F3\\u30C8\\u30B5\\u30A4\\u30BA:\",/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"8\",max:\"48\",value:fontSize,onChange:e=>{setFontSize(Number(e.target.value));if(selectedId){const element=elements.find(el=>el.id===selectedId);if(element&&element.type===\"text\"){handleElementUpdate(selectedId,{fontSize:Number(e.target.value)});}}},className:\"font-size-slider\"}),/*#__PURE__*/_jsxs(\"span\",{children:[fontSize,\"px\"]})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u30D5\\u30A9\\u30F3\\u30C8:\",/*#__PURE__*/_jsxs(\"select\",{value:fontFamily,onChange:e=>{setFontFamily(e.target.value);if(selectedId){const element=elements.find(el=>el.id===selectedId);if(element&&element.type===\"text\"){handleElementUpdate(selectedId,{fontFamily:e.target.value});}}},className:\"font-family-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Arial\",children:\"Arial\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Helvetica\",children:\"Helvetica\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Times New Roman\",children:\"Times New Roman\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Georgia\",children:\"Georgia\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Verdana\",children:\"Verdana\"})]})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u8272:\",/*#__PURE__*/_jsx(\"input\",{type:\"color\",value:textColor,onChange:e=>{setTextColor(e.target.value);if(selectedId){handleElementUpdate(selectedId,{fill:e.target.value});}},className:\"color-picker\"})]})]})]})]})]})})]});};export default BusinessCardDesign;","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","useAuth","Stage","Layer","Rect","Text","Transformer","Circle","Line","Group","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BusinessCardDesign","user","isAuthenticated","navigate","profile","setProfile","isLoading","setIsLoading","currentSide","setCurrentSide","elements","setElements","selectedId","setSelectedId","editingText","setEditingText","fontSize","setFontSize","textColor","setTextColor","fontFamily","setFontFamily","currentTool","setCurrentTool","showGrid","setShowGrid","showGuidelines","setShowGuidelines","history","setHistory","historyIndex","setHistoryIndex","showTextModal","setShowTextModal","selectedTextStyle","setSelectedTextStyle","transformerRef","stageRef","mockProfile","id","userId","company","jobTitle","bio","skills","interests","contactInfo","email","phone","sns","twitter","linkedin","github","instagram","website","isPublic","createdAt","Date","updatedAt","initialElements","type","text","x","y","fill","width","align","draggable","textStyle","name","addToHistory","current","_stageRef$current","node","findOne","concat","_transformerRef$curre","nodes","getLayer","batchDraw","newElements","newHistory","slice","push","length","undo","newIndex","redo","moveElement","direction","currentIndex","findIndex","el","alignElements","alignment","selectedElement","find","map","newEl","_objectSpread","handleTextClick","element","handleTextEdit","newText","handleElementUpdate","updates","handleAddText","style","arguments","undefined","now","handleAddShape","shapeType","newShape","height","stroke","strokeWidth","radius","points","handleAddIcon","iconType","newIcon","size","handleDeleteElement","filter","handleSave","Promise","resolve","setTimeout","console","log","error","handleCancel","handleExportImage","dataURL","toDataURL","link","document","createElement","download","href","click","renderElement","onClick","onTap","onDragEnd","e","target","children","className","ref","onMouseDown","getStage","Array","from","_","i","dash","stopPropagation","placeholder","value","onChange","onBlur","onKeyPress","key","min","max","Number"],"sources":["/Users/takahiro/Dev/webhack/src/pages/BusinessCardDesign.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { Profile } from \"../types\";\nimport {\n  Stage,\n  Layer,\n  Rect,\n  Text,\n  Transformer,\n  Circle,\n  Line,\n  Group,\n} from \"react-konva\";\nimport Konva from \"konva\";\nimport \"./BusinessCardDesign.css\";\n\ninterface TextElement {\n  id: string;\n  type: \"text\";\n  text: string;\n  x: number;\n  y: number;\n  fontSize: number;\n  fontFamily: string;\n  fill: string;\n  width: number;\n  align: string;\n  draggable: boolean;\n  textStyle?: \"heading\" | \"subheading\" | \"body\";\n}\n\ninterface ShapeElement {\n  id: string;\n  type: \"rect\" | \"circle\" | \"line\";\n  x: number;\n  y: number;\n  width?: number;\n  height?: number;\n  radius?: number;\n  points?: number[];\n  fill: string;\n  stroke: string;\n  strokeWidth: number;\n  draggable: boolean;\n}\n\ninterface IconElement {\n  id: string;\n  type: \"icon\";\n  iconType: string;\n  x: number;\n  y: number;\n  size: number;\n  fill: string;\n  draggable: boolean;\n}\n\ntype DesignElement = TextElement | ShapeElement | IconElement;\n\nconst BusinessCardDesign: React.FC = () => {\n  const { user, isAuthenticated } = useAuth();\n  const navigate = useNavigate();\n  const [profile, setProfile] = useState<Profile | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [currentSide, setCurrentSide] = useState<\"front\" | \"back\">(\"front\");\n  const [elements, setElements] = useState<DesignElement[]>([]);\n  const [selectedId, setSelectedId] = useState<string | null>(null);\n  const [editingText, setEditingText] = useState<string>(\"\");\n  const [fontSize, setFontSize] = useState(16);\n  const [textColor, setTextColor] = useState(\"#000000\");\n  const [fontFamily, setFontFamily] = useState(\"Arial\");\n  const [currentTool, setCurrentTool] = useState<\n    \"select\" | \"text\" | \"rect\" | \"circle\" | \"line\" | \"icon\"\n  >(\"select\");\n  const [showGrid, setShowGrid] = useState(false);\n  const [showGuidelines, setShowGuidelines] = useState(true);\n  const [history, setHistory] = useState<DesignElement[][]>([]);\n  const [historyIndex, setHistoryIndex] = useState(-1);\n  const [showTextModal, setShowTextModal] = useState(false);\n  const [selectedTextStyle, setSelectedTextStyle] = useState<\n    \"heading\" | \"subheading\" | \"body\"\n  >(\"body\");\n\n  const transformerRef = useRef<Konva.Transformer>(null);\n  const stageRef = useRef<Konva.Stage>(null);\n\n  useEffect(() => {\n    if (!isAuthenticated) {\n      navigate(\"/login\");\n      return;\n    }\n\n    // モックプロフィールデータを取得\n    const mockProfile: Profile = {\n      id: \"1\",\n      userId: user?.id || \"1\",\n      company: \"テック株式会社\",\n      jobTitle: \"フロントエンドエンジニア\",\n      bio: \"Web開発に携わって5年目です。React、TypeScript、Node.jsを中心に開発を行っています。ユーザビリティを重視した設計を心がけています。\",\n      skills: [\n        \"React\",\n        \"TypeScript\",\n        \"Node.js\",\n        \"CSS\",\n        \"HTML\",\n        \"JavaScript\",\n        \"Git\",\n        \"AWS\",\n      ],\n      interests: [\"プログラミング\", \"読書\", \"旅行\", \"料理\", \"音楽\"],\n      contactInfo: {\n        email: \"taro.tech@example.com\",\n        phone: \"090-1234-5678\",\n        sns: {\n          twitter: \"taro_tech\",\n          linkedin: \"taro-tech\",\n          github: \"taro-tech\",\n          instagram: \"taro_tech_dev\",\n        },\n        website: \"https://taro-tech.dev\",\n      },\n      isPublic: true,\n      createdAt: new Date(\"2024-01-01\"),\n      updatedAt: new Date(),\n    };\n\n    setProfile(mockProfile);\n    setIsLoading(false);\n  }, [isAuthenticated, user, navigate]);\n\n  // 初期テキスト要素を設定\n  useEffect(() => {\n    if (profile) {\n      const initialElements: DesignElement[] =\n        currentSide === \"front\"\n          ? [\n              {\n                id: \"company\",\n                type: \"text\",\n                text: profile.company || \"会社名\",\n                x: 200,\n                y: 60,\n                fontSize: 18,\n                fontFamily: \"Arial\",\n                fill: \"#000000\",\n                width: 400,\n                align: \"center\",\n                draggable: true,\n                textStyle: \"heading\",\n              },\n              {\n                id: \"jobTitle\",\n                type: \"text\",\n                text: profile.jobTitle || \"役職\",\n                x: 200,\n                y: 90,\n                fontSize: 14,\n                fontFamily: \"Arial\",\n                fill: \"#666666\",\n                width: 400,\n                align: \"center\",\n                draggable: true,\n                textStyle: \"subheading\",\n              },\n              {\n                id: \"name\",\n                type: \"text\",\n                text: user?.name || \"氏名\",\n                x: 200,\n                y: 120,\n                fontSize: 16,\n                fontFamily: \"Arial\",\n                fill: \"#000000\",\n                width: 400,\n                align: \"center\",\n                draggable: true,\n                textStyle: \"body\",\n              },\n            ]\n          : [\n              {\n                id: \"email\",\n                type: \"text\",\n                text: profile.contactInfo.email || \"メールアドレス\",\n                x: 200,\n                y: 80,\n                fontSize: 12,\n                fontFamily: \"Arial\",\n                fill: \"#000000\",\n                width: 400,\n                align: \"center\",\n                draggable: true,\n                textStyle: \"body\",\n              },\n              {\n                id: \"phone\",\n                type: \"text\",\n                text: profile.contactInfo.phone || \"電話番号\",\n                x: 200,\n                y: 110,\n                fontSize: 12,\n                fontFamily: \"Arial\",\n                fill: \"#000000\",\n                width: 400,\n                align: \"center\",\n                draggable: true,\n                textStyle: \"body\",\n              },\n              {\n                id: \"website\",\n                type: \"text\",\n                text: profile.contactInfo.website || \"ウェブサイト\",\n                x: 200,\n                y: 140,\n                fontSize: 12,\n                fontFamily: \"Arial\",\n                fill: \"#000000\",\n                width: 400,\n                align: \"center\",\n                draggable: true,\n                textStyle: \"body\",\n              },\n            ];\n\n      setElements(initialElements);\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n      addToHistory(initialElements);\n    }\n  }, [profile, currentSide, user]);\n\n  // 選択された要素のTransformerを更新\n  useEffect(() => {\n    if (selectedId && transformerRef.current) {\n      const node = stageRef.current?.findOne(`#${selectedId}`);\n      if (node) {\n        transformerRef.current.nodes([node]);\n        transformerRef.current.getLayer()?.batchDraw();\n      }\n    }\n  }, [selectedId]);\n\n  // 履歴管理\n  const addToHistory = (newElements: DesignElement[]) => {\n    const newHistory = history.slice(0, historyIndex + 1);\n    newHistory.push([...newElements]);\n    setHistory(newHistory);\n    setHistoryIndex(newHistory.length - 1);\n  };\n\n  const undo = () => {\n    if (historyIndex > 0) {\n      const newIndex = historyIndex - 1;\n      setHistoryIndex(newIndex);\n      setElements([...history[newIndex]]);\n    }\n  };\n\n  const redo = () => {\n    if (historyIndex < history.length - 1) {\n      const newIndex = historyIndex + 1;\n      setHistoryIndex(newIndex);\n      setElements([...history[newIndex]]);\n    }\n  };\n\n  const moveElement = (id: string, direction: \"forward\" | \"backward\") => {\n    const newElements = [...elements];\n    const currentIndex = newElements.findIndex((el) => el.id === id);\n\n    if (direction === \"forward\" && currentIndex < newElements.length - 1) {\n      [newElements[currentIndex], newElements[currentIndex + 1]] = [\n        newElements[currentIndex + 1],\n        newElements[currentIndex],\n      ];\n    } else if (direction === \"backward\" && currentIndex > 0) {\n      [newElements[currentIndex], newElements[currentIndex - 1]] = [\n        newElements[currentIndex - 1],\n        newElements[currentIndex],\n      ];\n    }\n\n    setElements(newElements);\n    addToHistory(newElements);\n  };\n\n  const alignElements = (\n    alignment: \"left\" | \"center\" | \"right\" | \"top\" | \"middle\" | \"bottom\"\n  ) => {\n    if (selectedId) {\n      const selectedElement = elements.find((el) => el.id === selectedId);\n      if (!selectedElement) return;\n\n      const newElements = elements.map((el) => {\n        if (el.id === selectedId) {\n          const newEl = { ...el };\n          switch (alignment) {\n            case \"left\":\n              newEl.x = 50;\n              break;\n            case \"center\":\n              newEl.x = 200;\n              break;\n            case \"right\":\n              newEl.x = 350;\n              break;\n            case \"top\":\n              newEl.y = 50;\n              break;\n            case \"middle\":\n              newEl.y = 121;\n              break;\n            case \"bottom\":\n              newEl.y = 192;\n              break;\n          }\n          return newEl;\n        }\n        return el;\n      });\n\n      setElements(newElements);\n      addToHistory(newElements);\n    }\n  };\n\n  const handleTextClick = (id: string) => {\n    setSelectedId(id);\n    const element = elements.find((el) => el.id === id);\n    if (element && element.type === \"text\") {\n      setEditingText(element.text);\n      setSelectedTextStyle(element.textStyle || \"body\");\n      setShowTextModal(true);\n    }\n  };\n\n  const handleTextEdit = (id: string, newText: string) => {\n    const newElements = elements.map((el) =>\n      el.id === id && el.type === \"text\" ? { ...el, text: newText } : el\n    );\n    setElements(newElements);\n    addToHistory(newElements);\n    setEditingText(\"\");\n  };\n\n  const handleElementUpdate = (id: string, updates: any) => {\n    const newElements = elements.map((el) =>\n      el.id === id ? { ...el, ...updates } : el\n    );\n    setElements(newElements);\n    addToHistory(newElements);\n  };\n\n  const handleAddText = (style: \"heading\" | \"subheading\" | \"body\" = \"body\") => {\n    let fontSize = 16;\n    let y = 100;\n\n    switch (style) {\n      case \"heading\":\n        fontSize = 24;\n        y = 80;\n        break;\n      case \"subheading\":\n        fontSize = 18;\n        y = 110;\n        break;\n      case \"body\":\n        fontSize = 14;\n        y = 140;\n        break;\n    }\n\n    const newText: TextElement = {\n      id: `text-${Date.now()}`,\n      type: \"text\",\n      text:\n        style === \"heading\"\n          ? \"見出し\"\n          : style === \"subheading\"\n          ? \"小見出し\"\n          : \"本文\",\n      x: 200,\n      y: y,\n      fontSize: fontSize,\n      fontFamily: fontFamily,\n      fill: textColor,\n      width: 400,\n      align: \"center\",\n      draggable: true,\n      textStyle: style,\n    };\n    const newElements = [...elements, newText];\n    setElements(newElements);\n    addToHistory(newElements);\n    setSelectedId(newText.id);\n    setShowTextModal(true);\n  };\n\n  const handleAddShape = (shapeType: \"rect\" | \"circle\" | \"line\") => {\n    let newShape: ShapeElement;\n\n    switch (shapeType) {\n      case \"rect\":\n        newShape = {\n          id: `rect-${Date.now()}`,\n          type: \"rect\",\n          x: 100,\n          y: 100,\n          width: 100,\n          height: 60,\n          fill: textColor,\n          stroke: \"#000000\",\n          strokeWidth: 2,\n          draggable: true,\n        };\n        break;\n      case \"circle\":\n        newShape = {\n          id: `circle-${Date.now()}`,\n          type: \"circle\",\n          x: 150,\n          y: 150,\n          radius: 30,\n          fill: textColor,\n          stroke: \"#000000\",\n          strokeWidth: 2,\n          draggable: true,\n        };\n        break;\n      case \"line\":\n        newShape = {\n          id: `line-${Date.now()}`,\n          type: \"line\",\n          x: 100,\n          y: 100,\n          points: [0, 0, 100, 0],\n          fill: \"#000000\",\n          stroke: \"#000000\",\n          strokeWidth: 2,\n          draggable: true,\n        };\n        break;\n    }\n\n    const newElements = [...elements, newShape];\n    setElements(newElements);\n    addToHistory(newElements);\n    setSelectedId(newShape.id);\n  };\n\n  const handleAddIcon = (iconType: string) => {\n    const newIcon: IconElement = {\n      id: `icon-${Date.now()}`,\n      type: \"icon\",\n      iconType,\n      x: 100,\n      y: 100,\n      size: 24,\n      fill: textColor,\n      draggable: true,\n    };\n\n    const newElements = [...elements, newIcon];\n    setElements(newElements);\n    addToHistory(newElements);\n    setSelectedId(newIcon.id);\n  };\n\n  const handleDeleteElement = () => {\n    if (selectedId) {\n      const newElements = elements.filter((el) => el.id !== selectedId);\n      setElements(newElements);\n      addToHistory(newElements);\n      setSelectedId(null);\n    }\n  };\n\n  const handleSave = async () => {\n    try {\n      await new Promise((resolve) => setTimeout(resolve, 1000));\n      console.log(\"名刺デザインを保存しました\");\n      console.log(\"現在の要素:\", elements);\n      navigate(\"/business-card/edit\");\n    } catch (error) {\n      console.error(\"名刺デザインの保存に失敗しました:\", error);\n    }\n  };\n\n  const handleCancel = () => {\n    navigate(\"/business-card/edit\");\n  };\n\n  const handleExportImage = () => {\n    if (stageRef.current) {\n      const dataURL = stageRef.current.toDataURL();\n      const link = document.createElement(\"a\");\n      link.download = `business-card-${currentSide}.png`;\n      link.href = dataURL;\n      link.click();\n    }\n  };\n\n  const renderElement = (element: DesignElement) => {\n    switch (element.type) {\n      case \"text\":\n        return (\n          <Text\n            key={element.id}\n            id={element.id}\n            text={element.text}\n            x={element.x}\n            y={element.y}\n            fontSize={element.fontSize}\n            fontFamily={element.fontFamily}\n            fill={element.fill}\n            align={element.align as any}\n            width={element.width}\n            draggable={element.draggable}\n            onClick={() => handleTextClick(element.id)}\n            onTap={() => handleTextClick(element.id)}\n            onDragEnd={(e) => {\n              handleElementUpdate(element.id, {\n                x: e.target.x(),\n                y: e.target.y(),\n              });\n            }}\n          />\n        );\n      case \"rect\":\n        return (\n          <Rect\n            key={element.id}\n            id={element.id}\n            x={element.x}\n            y={element.y}\n            width={element.width}\n            height={element.height}\n            fill={element.fill}\n            stroke={element.stroke}\n            strokeWidth={element.strokeWidth}\n            draggable={element.draggable}\n            onClick={() => setSelectedId(element.id)}\n            onTap={() => setSelectedId(element.id)}\n            onDragEnd={(e) => {\n              handleElementUpdate(element.id, {\n                x: e.target.x(),\n                y: e.target.y(),\n              });\n            }}\n          />\n        );\n      case \"circle\":\n        return (\n          <Circle\n            key={element.id}\n            id={element.id}\n            x={element.x}\n            y={element.y}\n            radius={element.radius}\n            fill={element.fill}\n            stroke={element.stroke}\n            strokeWidth={element.strokeWidth}\n            draggable={element.draggable}\n            onClick={() => setSelectedId(element.id)}\n            onTap={() => setSelectedId(element.id)}\n            onDragEnd={(e) => {\n              handleElementUpdate(element.id, {\n                x: e.target.x(),\n                y: e.target.y(),\n              });\n            }}\n          />\n        );\n      case \"line\":\n        return (\n          <Line\n            key={element.id}\n            id={element.id}\n            x={element.x}\n            y={element.y}\n            points={element.points}\n            fill={element.fill}\n            stroke={element.stroke}\n            strokeWidth={element.strokeWidth}\n            draggable={element.draggable}\n            onClick={() => setSelectedId(element.id)}\n            onTap={() => setSelectedId(element.id)}\n            onDragEnd={(e) => {\n              handleElementUpdate(element.id, {\n                x: e.target.x(),\n                y: e.target.y(),\n              });\n            }}\n          />\n        );\n      case \"icon\":\n        return (\n          <Group\n            key={element.id}\n            id={element.id}\n            x={element.x}\n            y={element.y}\n            draggable={element.draggable}\n            onClick={() => setSelectedId(element.id)}\n            onTap={() => setSelectedId(element.id)}\n            onDragEnd={(e) => {\n              handleElementUpdate(element.id, {\n                x: e.target.x(),\n                y: e.target.y(),\n              });\n            }}\n          >\n            {element.iconType === \"phone\" && (\n              <Rect\n                x={0}\n                y={0}\n                width={element.size}\n                height={element.size * 1.6}\n                fill={element.fill}\n              />\n            )}\n            {element.iconType === \"email\" && (\n              <Rect\n                x={0}\n                y={0}\n                width={element.size}\n                height={element.size * 0.8}\n                fill={element.fill}\n              />\n            )}\n            {element.iconType === \"website\" && (\n              <Circle\n                x={element.size / 2}\n                y={element.size / 2}\n                radius={element.size / 2}\n                fill={element.fill}\n              />\n            )}\n          </Group>\n        );\n      default:\n        return null;\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"business-card-design\">\n        <div className=\"container\">\n          <div className=\"loading\">読み込み中...</div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!profile) {\n    return (\n      <div className=\"business-card-design\">\n        <div className=\"container\">\n          <div className=\"error\">プロフィールが見つかりません</div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"business-card-design\">\n      <div className=\"container\">\n        <div className=\"design-header\">\n          <h1>名刺デザイン</h1>\n          <p>名刺の表面・裏面をデザインできます</p>\n        </div>\n\n        <div className=\"design-container\">\n          {/* サイド選択タブ */}\n          <div className=\"side-tabs\">\n            <button\n              className={`side-tab ${currentSide === \"front\" ? \"active\" : \"\"}`}\n              onClick={() => setCurrentSide(\"front\")}\n            >\n              表面\n            </button>\n            <button\n              className={`side-tab ${currentSide === \"back\" ? \"active\" : \"\"}`}\n              onClick={() => setCurrentSide(\"back\")}\n            >\n              裏面\n            </button>\n          </div>\n\n          {/* 描画エリア */}\n          <div className=\"canvas-container\">\n            <div className=\"canvas-wrapper\">\n              <Stage\n                ref={stageRef}\n                width={400}\n                height={242}\n                onMouseDown={(e) => {\n                  if (e.target === e.target.getStage()) {\n                    setSelectedId(null);\n                  }\n                }}\n              >\n                <Layer>\n                  {/* 背景 */}\n                  <Rect\n                    x={0}\n                    y={0}\n                    width={400}\n                    height={242}\n                    fill=\"#ffffff\"\n                    stroke=\"#e5e7eb\"\n                    strokeWidth={1}\n                  />\n\n                  {/* グリッド */}\n                  {showGrid && (\n                    <>\n                      {Array.from({ length: 20 }, (_, i) => (\n                        <Line\n                          key={`grid-v-${i}`}\n                          x={i * 20}\n                          y={0}\n                          points={[0, 0, 0, 242]}\n                          stroke=\"#f0f0f0\"\n                          strokeWidth={1}\n                        />\n                      ))}\n                      {Array.from({ length: 13 }, (_, i) => (\n                        <Line\n                          key={`grid-h-${i}`}\n                          x={0}\n                          y={i * 20}\n                          points={[0, 0, 400, 0]}\n                          stroke=\"#f0f0f0\"\n                          strokeWidth={1}\n                        />\n                      ))}\n                    </>\n                  )}\n\n                  {/* ガイドライン */}\n                  {showGuidelines && (\n                    <>\n                      <Line\n                        x={200}\n                        y={0}\n                        points={[0, 0, 0, 242]}\n                        stroke=\"#3b82f6\"\n                        strokeWidth={1}\n                        dash={[5, 5]}\n                      />\n                      <Line\n                        x={0}\n                        y={121}\n                        points={[0, 0, 400, 0]}\n                        stroke=\"#3b82f6\"\n                        strokeWidth={1}\n                        dash={[5, 5]}\n                      />\n                    </>\n                  )}\n\n                  {/* デザイン要素 */}\n                  {elements.map(renderElement)}\n\n                  {/* Transformer */}\n                  <Transformer ref={transformerRef} />\n                </Layer>\n              </Stage>\n            </div>\n          </div>\n\n          {/* 下部ツールバー */}\n          <div className=\"bottom-toolbar\">\n            <div className=\"toolbar-scroll\">\n              <div\n                className=\"toolbar-item\"\n                onClick={() => setCurrentTool(\"select\")}\n              >\n                <div className=\"toolbar-icon\">✋</div>\n                <div className=\"toolbar-label\">選択</div>\n              </div>\n              <div\n                className=\"toolbar-item\"\n                onClick={() => handleAddText(\"heading\")}\n              >\n                <div className=\"toolbar-icon\">T</div>\n                <div className=\"toolbar-label\">テキスト</div>\n              </div>\n              <div\n                className=\"toolbar-item\"\n                onClick={() => handleAddShape(\"rect\")}\n              >\n                <div className=\"toolbar-icon\">□</div>\n                <div className=\"toolbar-label\">図形</div>\n              </div>\n              <div\n                className=\"toolbar-item\"\n                onClick={() => handleAddIcon(\"phone\")}\n              >\n                <div className=\"toolbar-icon\">📞</div>\n                <div className=\"toolbar-label\">アイコン</div>\n              </div>\n              <div\n                className={`toolbar-item ${historyIndex <= 0 ? 'disabled' : ''}`}\n                onClick={historyIndex > 0 ? undo : undefined}\n              >\n                <div className=\"toolbar-icon\">↶</div>\n                <div className=\"toolbar-label\">戻る</div>\n              </div>\n              <div\n                className={`toolbar-item ${historyIndex >= history.length - 1 ? 'disabled' : ''}`}\n                onClick={historyIndex < history.length - 1 ? redo : undefined}\n              >\n                <div className=\"toolbar-icon\">↷</div>\n                <div className=\"toolbar-label\">進む</div>\n              </div>\n            </div>\n          </div>\n\n          {/* アクションボタン */}\n          <div className=\"design-actions\">\n            <button\n              type=\"button\"\n              className=\"btn btn-secondary\"\n              onClick={handleCancel}\n            >\n              キャンセル\n            </button>\n            <button\n              type=\"button\"\n              className=\"btn btn-primary\"\n              onClick={handleSave}\n            >\n              デザインを保存\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* テキスト編集モーダル */}\n      {showTextModal && (\n        <div className=\"modal-overlay\" onClick={() => setShowTextModal(false)}>\n          <div className=\"modal-content\" onClick={(e) => e.stopPropagation()}>\n            <div className=\"modal-header\">\n              <h3>テキスト編集</h3>\n              <button\n                className=\"modal-close\"\n                onClick={() => setShowTextModal(false)}\n              >\n                ×\n              </button>\n            </div>\n\n            <div className=\"modal-body\">\n              <div className=\"search-section\">\n                <div className=\"search-bar\">\n                  <span className=\"search-icon\">🔍</span>\n                  <input\n                    type=\"text\"\n                    placeholder=\"フォントと組み合わせを検索\"\n                    className=\"search-input\"\n                  />\n                </div>\n              </div>\n\n              <div className=\"text-options\">\n                <button\n                  className=\"text-option-btn primary\"\n                  onClick={() => handleAddText(\"heading\")}\n                >\n                  <span className=\"text-icon\">T</span>\n                  <span className=\"text-label\">見出しを追加</span>\n                </button>\n\n                <button\n                  className=\"text-option-btn secondary\"\n                  onClick={() => handleAddText(\"subheading\")}\n                >\n                  <span className=\"text-icon\">T</span>\n                  <span className=\"text-label\">小見出しを追加</span>\n                </button>\n\n                <button\n                  className=\"text-option-btn secondary\"\n                  onClick={() => handleAddText(\"body\")}\n                >\n                  <span className=\"text-icon\">T</span>\n                  <span className=\"text-label\">本文を追加</span>\n                </button>\n              </div>\n\n              {selectedId && (\n                <div className=\"text-editor-section\">\n                  <h4>テキスト編集</h4>\n                  <input\n                    type=\"text\"\n                    value={editingText}\n                    onChange={(e) => setEditingText(e.target.value)}\n                    onBlur={() => handleTextEdit(selectedId, editingText)}\n                    onKeyPress={(e) => {\n                      if (e.key === \"Enter\") {\n                        handleTextEdit(selectedId, editingText);\n                      }\n                    }}\n                    placeholder=\"テキストを入力\"\n                    className=\"text-input\"\n                  />\n\n                  <div className=\"style-controls\">\n                    <label>\n                      フォントサイズ:\n                      <input\n                        type=\"range\"\n                        min=\"8\"\n                        max=\"48\"\n                        value={fontSize}\n                        onChange={(e) => {\n                          setFontSize(Number(e.target.value));\n                          if (selectedId) {\n                            const element = elements.find(\n                              (el) => el.id === selectedId\n                            );\n                            if (element && element.type === \"text\") {\n                              handleElementUpdate(selectedId, {\n                                fontSize: Number(e.target.value),\n                              });\n                            }\n                          }\n                        }}\n                        className=\"font-size-slider\"\n                      />\n                      <span>{fontSize}px</span>\n                    </label>\n\n                    <label>\n                      フォント:\n                      <select\n                        value={fontFamily}\n                        onChange={(e) => {\n                          setFontFamily(e.target.value);\n                          if (selectedId) {\n                            const element = elements.find(\n                              (el) => el.id === selectedId\n                            );\n                            if (element && element.type === \"text\") {\n                              handleElementUpdate(selectedId, {\n                                fontFamily: e.target.value,\n                              });\n                            }\n                          }\n                        }}\n                        className=\"font-family-select\"\n                      >\n                        <option value=\"Arial\">Arial</option>\n                        <option value=\"Helvetica\">Helvetica</option>\n                        <option value=\"Times New Roman\">Times New Roman</option>\n                        <option value=\"Georgia\">Georgia</option>\n                        <option value=\"Verdana\">Verdana</option>\n                      </select>\n                    </label>\n\n                    <label>\n                      色:\n                      <input\n                        type=\"color\"\n                        value={textColor}\n                        onChange={(e) => {\n                          setTextColor(e.target.value);\n                          if (selectedId) {\n                            handleElementUpdate(selectedId, {\n                              fill: e.target.value,\n                            });\n                          }\n                        }}\n                        className=\"color-picker\"\n                      />\n                    </label>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default BusinessCardDesign;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}