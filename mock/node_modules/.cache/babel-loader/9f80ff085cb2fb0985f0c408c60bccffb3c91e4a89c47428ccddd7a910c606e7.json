{"ast":null,"code":"import _objectSpread from\"/Users/takahiro/Dev/webhack/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{useAuth}from\"../contexts/AuthContext\";import\"./ChangePassword.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChangePassword=()=>{const{user}=useAuth();const navigate=useNavigate();const[formData,setFormData]=useState({currentPassword:\"\",newPassword:\"\",confirmNewPassword:\"\"});const[isSaving,setIsSaving]=useState(false);const[errors,setErrors]=useState({});const handleInputChange=(field,value)=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[field]:value}));// エラーをクリア\nif(errors[field]){setErrors(_objectSpread(_objectSpread({},errors),{},{[field]:undefined}));}};const validateForm=()=>{const newErrors={};if(!formData.currentPassword.trim()){newErrors.currentPassword=\"現在のパスワードを入力してください\";}if(!formData.newPassword.trim()){newErrors.newPassword=\"新しいパスワードを入力してください\";}else if(formData.newPassword.length<8){newErrors.newPassword=\"パスワードは8文字以上で入力してください\";}if(!formData.confirmNewPassword.trim()){newErrors.confirmNewPassword=\"新しいパスワードを再入力してください\";}else if(formData.newPassword!==formData.confirmNewPassword){newErrors.confirmNewPassword=\"パスワードが一致しません\";}setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleSubmit=async e=>{e.preventDefault();if(!validateForm()){return;}setIsSaving(true);try{// モックAPI呼び出し\nawait new Promise(resolve=>setTimeout(resolve,1000));// 成功時の処理\nconsole.log(\"パスワードを変更しました\");navigate(\"/settings\");}catch(error){console.error(\"パスワードの変更に失敗しました:\",error);}finally{setIsSaving(false);}};const handleCancel=()=>{navigate(\"/settings\");};return/*#__PURE__*/_jsx(\"div\",{className:\"change-password\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"edit-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-header\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"form-title\",children:\"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\u5909\\u66F4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"form-description\",children:\"\\u65B0\\u3057\\u3044\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\u306B\\u5909\\u66F4\\u3059\\u308B\\u306B\\u306F\\u3001\\u73FE\\u5728\\u306E\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\u306E\\u5165\\u529B\\u304C\\u5FC5\\u8981\\u3067\\u3059\\u3002\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"currentPassword\",children:\"\\u73FE\\u5728\\u306E\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"currentPassword\",value:formData.currentPassword,onChange:e=>handleInputChange(\"currentPassword\",e.target.value),placeholder:\"\\u73FE\\u5728\\u306E\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\",className:errors.currentPassword?\"error\":\"\"}),errors.currentPassword&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:errors.currentPassword})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"newPassword\",children:\"\\u65B0\\u3057\\u3044\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"newPassword\",value:formData.newPassword,onChange:e=>handleInputChange(\"newPassword\",e.target.value),placeholder:\"\\u65B0\\u3057\\u3044\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\uFF088\\u6587\\u5B57\\u4EE5\\u4E0A\\uFF09\",className:errors.newPassword?\"error\":\"\"}),errors.newPassword&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:errors.newPassword})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"confirmNewPassword\",children:\"\\u65B0\\u3057\\u3044\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\u78BA\\u8A8D\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"confirmNewPassword\",value:formData.confirmNewPassword,onChange:e=>handleInputChange(\"confirmNewPassword\",e.target.value),placeholder:\"\\u65B0\\u3057\\u3044\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\u3092\\u518D\\u5165\\u529B\",className:errors.confirmNewPassword?\"error\":\"\"}),errors.confirmNewPassword&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:errors.confirmNewPassword})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:handleCancel,disabled:isSaving,children:\"\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:isSaving,children:isSaving?\"変更中...\":\"変更する\"})]})]})]})})});};export default ChangePassword;","map":{"version":3,"names":["React","useState","useNavigate","useAuth","jsx","_jsx","jsxs","_jsxs","ChangePassword","user","navigate","formData","setFormData","currentPassword","newPassword","confirmNewPassword","isSaving","setIsSaving","errors","setErrors","handleInputChange","field","value","_objectSpread","undefined","validateForm","newErrors","trim","length","Object","keys","handleSubmit","e","preventDefault","Promise","resolve","setTimeout","console","log","error","handleCancel","className","children","onSubmit","htmlFor","type","id","onChange","target","placeholder","onClick","disabled"],"sources":["/Users/takahiro/Dev/webhack/src/pages/ChangePassword.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { ChangePasswordForm } from \"../types\";\nimport \"./ChangePassword.css\";\n\nconst ChangePassword: React.FC = () => {\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const [formData, setFormData] = useState<ChangePasswordForm>({\n    currentPassword: \"\",\n    newPassword: \"\",\n    confirmNewPassword: \"\",\n  });\n  const [isSaving, setIsSaving] = useState(false);\n  const [errors, setErrors] = useState<Partial<ChangePasswordForm>>({});\n\n  const handleInputChange = (field: keyof ChangePasswordForm, value: string) => {\n    setFormData({\n      ...formData,\n      [field]: value,\n    });\n    // エラーをクリア\n    if (errors[field]) {\n      setErrors({\n        ...errors,\n        [field]: undefined,\n      });\n    }\n  };\n\n  const validateForm = (): boolean => {\n    const newErrors: Partial<ChangePasswordForm> = {};\n\n    if (!formData.currentPassword.trim()) {\n      newErrors.currentPassword = \"現在のパスワードを入力してください\";\n    }\n\n    if (!formData.newPassword.trim()) {\n      newErrors.newPassword = \"新しいパスワードを入力してください\";\n    } else if (formData.newPassword.length < 8) {\n      newErrors.newPassword = \"パスワードは8文字以上で入力してください\";\n    }\n\n    if (!formData.confirmNewPassword.trim()) {\n      newErrors.confirmNewPassword = \"新しいパスワードを再入力してください\";\n    } else if (formData.newPassword !== formData.confirmNewPassword) {\n      newErrors.confirmNewPassword = \"パスワードが一致しません\";\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!validateForm()) {\n      return;\n    }\n\n    setIsSaving(true);\n\n    try {\n      // モックAPI呼び出し\n      await new Promise((resolve) => setTimeout(resolve, 1000));\n\n      // 成功時の処理\n      console.log(\"パスワードを変更しました\");\n      navigate(\"/settings\");\n    } catch (error) {\n      console.error(\"パスワードの変更に失敗しました:\", error);\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const handleCancel = () => {\n    navigate(\"/settings\");\n  };\n\n  return (\n    <div className=\"change-password\">\n      <div className=\"container\">\n        <div className=\"edit-form\">\n          <div className=\"form-header\">\n            <h2 className=\"form-title\">パスワード変更</h2>\n            <p className=\"form-description\">\n              新しいパスワードに変更するには、現在のパスワードの入力が必要です。\n            </p>\n          </div>\n\n          <form onSubmit={handleSubmit}>\n            {/* 現在のパスワード */}\n            <div className=\"form-group\">\n              <label htmlFor=\"currentPassword\">現在のパスワード</label>\n              <input\n                type=\"password\"\n                id=\"currentPassword\"\n                value={formData.currentPassword}\n                onChange={(e) => handleInputChange(\"currentPassword\", e.target.value)}\n                placeholder=\"現在のパスワード\"\n                className={errors.currentPassword ? \"error\" : \"\"}\n              />\n              {errors.currentPassword && (\n                <div className=\"error-message\">{errors.currentPassword}</div>\n              )}\n            </div>\n\n            {/* 新しいパスワード */}\n            <div className=\"form-group\">\n              <label htmlFor=\"newPassword\">新しいパスワード</label>\n              <input\n                type=\"password\"\n                id=\"newPassword\"\n                value={formData.newPassword}\n                onChange={(e) => handleInputChange(\"newPassword\", e.target.value)}\n                placeholder=\"新しいパスワード（8文字以上）\"\n                className={errors.newPassword ? \"error\" : \"\"}\n              />\n              {errors.newPassword && (\n                <div className=\"error-message\">{errors.newPassword}</div>\n              )}\n            </div>\n\n            {/* 新しいパスワード確認 */}\n            <div className=\"form-group\">\n              <label htmlFor=\"confirmNewPassword\">新しいパスワード確認</label>\n              <input\n                type=\"password\"\n                id=\"confirmNewPassword\"\n                value={formData.confirmNewPassword}\n                onChange={(e) => handleInputChange(\"confirmNewPassword\", e.target.value)}\n                placeholder=\"新しいパスワードを再入力\"\n                className={errors.confirmNewPassword ? \"error\" : \"\"}\n              />\n              {errors.confirmNewPassword && (\n                <div className=\"error-message\">{errors.confirmNewPassword}</div>\n              )}\n            </div>\n\n            {/* ボタン */}\n            <div className=\"form-actions\">\n              <button\n                type=\"button\"\n                className=\"btn btn-secondary\"\n                onClick={handleCancel}\n                disabled={isSaving}\n              >\n                キャンセル\n              </button>\n              <button\n                type=\"submit\"\n                className=\"btn btn-primary\"\n                disabled={isSaving}\n              >\n                {isSaving ? \"変更中...\" : \"変更する\"}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChangePassword;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}