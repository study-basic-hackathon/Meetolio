{"ast":null,"code":"import _objectSpread from\"/Users/takahiro/Dev/webhack/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useRef}from\"react\";import{useNavigate}from\"react-router-dom\";import{useAuth}from\"../contexts/AuthContext\";import{Stage,Layer,Rect,Text,Transformer,Circle,Line,Group}from\"react-konva\";import\"./BusinessCardDesign.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const BusinessCardDesign=()=>{var _elements$find;const{user,isAuthenticated}=useAuth();const navigate=useNavigate();const[profile,setProfile]=useState(null);const[isLoading,setIsLoading]=useState(true);const[currentSide,setCurrentSide]=useState(\"front\");const[elements,setElements]=useState([]);const[selectedId,setSelectedId]=useState(null);const[editingText,setEditingText]=useState(\"\");const[fontSize,setFontSize]=useState(16);const[textColor,setTextColor]=useState(\"#000000\");const[fontFamily,setFontFamily]=useState(\"Arial\");const[currentTool,setCurrentTool]=useState('select');const[showGrid,setShowGrid]=useState(false);const[showGuidelines,setShowGuidelines]=useState(true);const[history,setHistory]=useState([]);const[historyIndex,setHistoryIndex]=useState(-1);const transformerRef=useRef(null);const stageRef=useRef(null);useEffect(()=>{if(!isAuthenticated){navigate(\"/login\");return;}// モックプロフィールデータを取得\nconst mockProfile={id:\"1\",userId:(user===null||user===void 0?void 0:user.id)||\"1\",company:\"テック株式会社\",jobTitle:\"フロントエンドエンジニア\",bio:\"Web開発に携わって5年目です。React、TypeScript、Node.jsを中心に開発を行っています。ユーザビリティを重視した設計を心がけています。\",skills:[\"React\",\"TypeScript\",\"Node.js\",\"CSS\",\"HTML\",\"JavaScript\",\"Git\",\"AWS\"],interests:[\"プログラミング\",\"読書\",\"旅行\",\"料理\",\"音楽\"],contactInfo:{email:\"taro.tech@example.com\",phone:\"090-1234-5678\",sns:{twitter:\"taro_tech\",linkedin:\"taro-tech\",github:\"taro-tech\",instagram:\"taro_tech_dev\"},website:\"https://taro-tech.dev\"},isPublic:true,createdAt:new Date(\"2024-01-01\"),updatedAt:new Date()};setProfile(mockProfile);setIsLoading(false);},[isAuthenticated,user,navigate]);// 初期テキスト要素を設定\nuseEffect(()=>{if(profile){const initialElements=currentSide===\"front\"?[{id:\"company\",type:\"text\",text:profile.company||\"会社名\",x:200,y:60,fontSize:18,fontFamily:\"Arial\",fill:\"#000000\",width:400,align:\"center\",draggable:true},{id:\"jobTitle\",type:\"text\",text:profile.jobTitle||\"役職\",x:200,y:90,fontSize:14,fontFamily:\"Arial\",fill:\"#666666\",width:400,align:\"center\",draggable:true},{id:\"name\",type:\"text\",text:(user===null||user===void 0?void 0:user.name)||\"氏名\",x:200,y:120,fontSize:16,fontFamily:\"Arial\",fill:\"#000000\",width:400,align:\"center\",draggable:true}]:[{id:\"email\",type:\"text\",text:profile.contactInfo.email||\"メールアドレス\",x:200,y:80,fontSize:12,fontFamily:\"Arial\",fill:\"#000000\",width:400,align:\"center\",draggable:true},{id:\"phone\",type:\"text\",text:profile.contactInfo.phone||\"電話番号\",x:200,y:110,fontSize:12,fontFamily:\"Arial\",fill:\"#000000\",width:400,align:\"center\",draggable:true},{id:\"website\",type:\"text\",text:profile.contactInfo.website||\"ウェブサイト\",x:200,y:140,fontSize:12,fontFamily:\"Arial\",fill:\"#000000\",width:400,align:\"center\",draggable:true}];setElements(initialElements);addToHistory(initialElements);}},[profile,currentSide,user]);// 選択された要素のTransformerを更新\nuseEffect(()=>{if(selectedId&&transformerRef.current){var _stageRef$current;const node=(_stageRef$current=stageRef.current)===null||_stageRef$current===void 0?void 0:_stageRef$current.findOne(\"#\".concat(selectedId));if(node){var _transformerRef$curre;transformerRef.current.nodes([node]);(_transformerRef$curre=transformerRef.current.getLayer())===null||_transformerRef$curre===void 0?void 0:_transformerRef$curre.batchDraw();}}},[selectedId]);// 履歴管理\nconst addToHistory=newElements=>{const newHistory=history.slice(0,historyIndex+1);newHistory.push([...newElements]);setHistory(newHistory);setHistoryIndex(newHistory.length-1);};const undo=()=>{if(historyIndex>0){const newIndex=historyIndex-1;setHistoryIndex(newIndex);setElements([...history[newIndex]]);}};const redo=()=>{if(historyIndex<history.length-1){const newIndex=historyIndex+1;setHistoryIndex(newIndex);setElements([...history[newIndex]]);}};const moveElement=(id,direction)=>{const newElements=[...elements];const currentIndex=newElements.findIndex(el=>el.id===id);if(direction==='forward'&&currentIndex<newElements.length-1){[newElements[currentIndex],newElements[currentIndex+1]]=[newElements[currentIndex+1],newElements[currentIndex]];}else if(direction==='backward'&&currentIndex>0){[newElements[currentIndex],newElements[currentIndex-1]]=[newElements[currentIndex-1],newElements[currentIndex]];}setElements(newElements);addToHistory(newElements);};const alignElements=alignment=>{if(selectedId){const selectedElement=elements.find(el=>el.id===selectedId);if(!selectedElement)return;const newElements=elements.map(el=>{if(el.id===selectedId){const newEl=_objectSpread({},el);switch(alignment){case'left':newEl.x=50;break;case'center':newEl.x=200;break;case'right':newEl.x=350;break;case'top':newEl.y=50;break;case'middle':newEl.y=121;break;case'bottom':newEl.y=192;break;}return newEl;}return el;});setElements(newElements);addToHistory(newElements);}};const handleTextClick=id=>{setSelectedId(id);const element=elements.find(el=>el.id===id);if(element&&element.type==='text'){setEditingText(element.text);}};const handleTextEdit=(id,newText)=>{const newElements=elements.map(el=>el.id===id&&el.type==='text'?_objectSpread(_objectSpread({},el),{},{text:newText}):el);setElements(newElements);addToHistory(newElements);setEditingText(\"\");};const handleElementUpdate=(id,updates)=>{const newElements=elements.map(el=>el.id===id?_objectSpread(_objectSpread({},el),updates):el);setElements(newElements);addToHistory(newElements);};const handleAddText=()=>{const newText={id:\"text-\".concat(Date.now()),type:\"text\",text:\"新しいテキスト\",x:100,y:100,fontSize:fontSize,fontFamily:fontFamily,fill:textColor,width:200,align:\"left\",draggable:true};const newElements=[...elements,newText];setElements(newElements);addToHistory(newElements);setSelectedId(newText.id);};const handleAddShape=shapeType=>{let newShape;switch(shapeType){case'rect':newShape={id:\"rect-\".concat(Date.now()),type:'rect',x:100,y:100,width:100,height:60,fill:textColor,stroke:'#000000',strokeWidth:2,draggable:true};break;case'circle':newShape={id:\"circle-\".concat(Date.now()),type:'circle',x:150,y:150,radius:30,fill:textColor,stroke:'#000000',strokeWidth:2,draggable:true};break;case'line':newShape={id:\"line-\".concat(Date.now()),type:'line',x:100,y:100,points:[0,0,100,0],fill:'#000000',stroke:'#000000',strokeWidth:2,draggable:true};break;}const newElements=[...elements,newShape];setElements(newElements);addToHistory(newElements);setSelectedId(newShape.id);};const handleAddIcon=iconType=>{const newIcon={id:\"icon-\".concat(Date.now()),type:'icon',iconType,x:100,y:100,size:24,fill:textColor,draggable:true};const newElements=[...elements,newIcon];setElements(newElements);addToHistory(newElements);setSelectedId(newIcon.id);};const handleDeleteElement=()=>{if(selectedId){const newElements=elements.filter(el=>el.id!==selectedId);setElements(newElements);addToHistory(newElements);setSelectedId(null);}};const handleSave=async()=>{try{await new Promise(resolve=>setTimeout(resolve,1000));console.log(\"名刺デザインを保存しました\");console.log(\"現在の要素:\",elements);navigate(\"/business-card/edit\");}catch(error){console.error(\"名刺デザインの保存に失敗しました:\",error);}};const handleCancel=()=>{navigate(\"/business-card/edit\");};const handleExportImage=()=>{if(stageRef.current){const dataURL=stageRef.current.toDataURL();const link=document.createElement(\"a\");link.download=\"business-card-\".concat(currentSide,\".png\");link.href=dataURL;link.click();}};const renderElement=element=>{switch(element.type){case'text':return/*#__PURE__*/_jsx(Text,{id:element.id,text:element.text,x:element.x,y:element.y,fontSize:element.fontSize,fontFamily:element.fontFamily,fill:element.fill,align:element.align,width:element.width,draggable:element.draggable,onClick:()=>handleTextClick(element.id),onTap:()=>handleTextClick(element.id),onDragEnd:e=>{handleElementUpdate(element.id,{x:e.target.x(),y:e.target.y()});}},element.id);case'rect':return/*#__PURE__*/_jsx(Rect,{id:element.id,x:element.x,y:element.y,width:element.width,height:element.height,fill:element.fill,stroke:element.stroke,strokeWidth:element.strokeWidth,draggable:element.draggable,onClick:()=>setSelectedId(element.id),onTap:()=>setSelectedId(element.id),onDragEnd:e=>{handleElementUpdate(element.id,{x:e.target.x(),y:e.target.y()});}},element.id);case'circle':return/*#__PURE__*/_jsx(Circle,{id:element.id,x:element.x,y:element.y,radius:element.radius,fill:element.fill,stroke:element.stroke,strokeWidth:element.strokeWidth,draggable:element.draggable,onClick:()=>setSelectedId(element.id),onTap:()=>setSelectedId(element.id),onDragEnd:e=>{handleElementUpdate(element.id,{x:e.target.x(),y:e.target.y()});}},element.id);case'line':return/*#__PURE__*/_jsx(Line,{id:element.id,x:element.x,y:element.y,points:element.points,fill:element.fill,stroke:element.stroke,strokeWidth:element.strokeWidth,draggable:element.draggable,onClick:()=>setSelectedId(element.id),onTap:()=>setSelectedId(element.id),onDragEnd:e=>{handleElementUpdate(element.id,{x:e.target.x(),y:e.target.y()});}},element.id);case'icon':return/*#__PURE__*/_jsxs(Group,{id:element.id,x:element.x,y:element.y,draggable:element.draggable,onClick:()=>setSelectedId(element.id),onTap:()=>setSelectedId(element.id),onDragEnd:e=>{handleElementUpdate(element.id,{x:e.target.x(),y:e.target.y()});},children:[element.iconType==='phone'&&/*#__PURE__*/_jsx(Rect,{x:0,y:0,width:element.size,height:element.size*1.6,fill:element.fill}),element.iconType==='email'&&/*#__PURE__*/_jsx(Rect,{x:0,y:0,width:element.size,height:element.size*0.8,fill:element.fill}),element.iconType==='website'&&/*#__PURE__*/_jsx(Circle,{x:element.size/2,y:element.size/2,radius:element.size/2,fill:element.fill})]},element.id);default:return null;}};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{className:\"business-card-design\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"\\u8AAD\\u307F\\u8FBC\\u307F\\u4E2D...\"})})});}if(!profile){return/*#__PURE__*/_jsx(\"div\",{className:\"business-card-design\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:\"\\u30D7\\u30ED\\u30D5\\u30A3\\u30FC\\u30EB\\u304C\\u898B\\u3064\\u304B\\u308A\\u307E\\u305B\\u3093\"})})});}return/*#__PURE__*/_jsx(\"div\",{className:\"business-card-design\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"design-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\u540D\\u523A\\u30C7\\u30B6\\u30A4\\u30F3\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u540D\\u523A\\u306E\\u8868\\u9762\\u30FB\\u88CF\\u9762\\u3092\\u30C7\\u30B6\\u30A4\\u30F3\\u3067\\u304D\\u307E\\u3059\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"design-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"side-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"side-tab \".concat(currentSide===\"front\"?\"active\":\"\"),onClick:()=>setCurrentSide(\"front\"),children:\"\\u8868\\u9762\"}),/*#__PURE__*/_jsx(\"button\",{className:\"side-tab \".concat(currentSide===\"back\"?\"active\":\"\"),onClick:()=>setCurrentSide(\"back\"),children:\"\\u88CF\\u9762\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"design-toolbar\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"toolbar-group\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"toolbar-btn \".concat(currentTool==='select'?'active':''),onClick:()=>setCurrentTool('select'),title:\"\\u9078\\u629E\",children:\"\\u270B\"}),/*#__PURE__*/_jsx(\"button\",{className:\"toolbar-btn \".concat(currentTool==='text'?'active':''),onClick:()=>setCurrentTool('text'),title:\"\\u30C6\\u30AD\\u30B9\\u30C8\",children:\"T\"}),/*#__PURE__*/_jsx(\"button\",{className:\"toolbar-btn \".concat(currentTool==='rect'?'active':''),onClick:()=>setCurrentTool('rect'),title:\"\\u56DB\\u89D2\\u5F62\",children:\"\\u25A1\"}),/*#__PURE__*/_jsx(\"button\",{className:\"toolbar-btn \".concat(currentTool==='circle'?'active':''),onClick:()=>setCurrentTool('circle'),title:\"\\u5186\",children:\"\\u25CB\"}),/*#__PURE__*/_jsx(\"button\",{className:\"toolbar-btn \".concat(currentTool==='line'?'active':''),onClick:()=>setCurrentTool('line'),title:\"\\u7DDA\",children:\"/\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"toolbar-group\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"toolbar-btn\",onClick:undo,disabled:historyIndex<=0,title:\"\\u5143\\u306B\\u623B\\u3059\",children:\"\\u21B6\"}),/*#__PURE__*/_jsx(\"button\",{className:\"toolbar-btn\",onClick:redo,disabled:historyIndex>=history.length-1,title:\"\\u3084\\u308A\\u76F4\\u3057\",children:\"\\u21B7\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"toolbar-group\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"toolbar-btn\",onClick:()=>selectedId&&moveElement(selectedId,'forward'),disabled:!selectedId,title:\"\\u524D\\u9762\\u3078\",children:\"\\u2B06\"}),/*#__PURE__*/_jsx(\"button\",{className:\"toolbar-btn\",onClick:()=>selectedId&&moveElement(selectedId,'backward'),disabled:!selectedId,title:\"\\u80CC\\u9762\\u3078\",children:\"\\u2B07\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"toolbar-group\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"toolbar-btn \".concat(showGrid?'active':''),onClick:()=>setShowGrid(!showGrid),title:\"\\u30B0\\u30EA\\u30C3\\u30C9\",children:\"#\"}),/*#__PURE__*/_jsx(\"button\",{className:\"toolbar-btn \".concat(showGuidelines?'active':''),onClick:()=>setShowGuidelines(!showGuidelines),title:\"\\u30AC\\u30A4\\u30C9\\u30E9\\u30A4\\u30F3\",children:\"\\u229E\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"toolbar-group\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"toolbar-btn\",onClick:()=>alignElements('left'),disabled:!selectedId,title:\"\\u5DE6\\u63C3\\u3048\",children:\"\\u2B05\"}),/*#__PURE__*/_jsx(\"button\",{className:\"toolbar-btn\",onClick:()=>alignElements('center'),disabled:!selectedId,title:\"\\u4E2D\\u592E\\u63C3\\u3048\",children:\"\\u2194\"}),/*#__PURE__*/_jsx(\"button\",{className:\"toolbar-btn\",onClick:()=>alignElements('right'),disabled:!selectedId,title:\"\\u53F3\\u63C3\\u3048\",children:\"\\u27A1\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"design-workspace\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"editor-container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"editor-wrapper\",children:/*#__PURE__*/_jsx(Stage,{ref:stageRef,width:400,height:242,onMouseDown:e=>{if(e.target===e.target.getStage()){setSelectedId(null);}},children:/*#__PURE__*/_jsxs(Layer,{children:[/*#__PURE__*/_jsx(Rect,{x:0,y:0,width:400,height:242,fill:\"#ffffff\",stroke:\"#e5e7eb\",strokeWidth:1}),showGrid&&/*#__PURE__*/_jsxs(_Fragment,{children:[Array.from({length:20},(_,i)=>/*#__PURE__*/_jsx(Line,{x:i*20,y:0,points:[0,0,0,242],stroke:\"#f0f0f0\",strokeWidth:1},\"grid-v-\".concat(i))),Array.from({length:13},(_,i)=>/*#__PURE__*/_jsx(Line,{x:0,y:i*20,points:[0,0,400,0],stroke:\"#f0f0f0\",strokeWidth:1},\"grid-h-\".concat(i)))]}),showGuidelines&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Line,{x:200,y:0,points:[0,0,0,242],stroke:\"#3b82f6\",strokeWidth:1,dash:[5,5]}),/*#__PURE__*/_jsx(Line,{x:0,y:121,points:[0,0,400,0],stroke:\"#3b82f6\",strokeWidth:1,dash:[5,5]})]}),elements.map(renderElement),/*#__PURE__*/_jsx(Transformer,{ref:transformerRef})]})})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"design-tools\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tool-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u30C4\\u30FC\\u30EB\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"tool-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:()=>handleAddText(),children:\"\\u30C6\\u30AD\\u30B9\\u30C8\\u8FFD\\u52A0\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:()=>handleAddShape('rect'),children:\"\\u56DB\\u89D2\\u5F62\\u8FFD\\u52A0\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:()=>handleAddShape('circle'),children:\"\\u5186\\u8FFD\\u52A0\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:()=>handleAddShape('line'),children:\"\\u7DDA\\u8FFD\\u52A0\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tool-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u30A2\\u30A4\\u30B3\\u30F3\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"icon-buttons\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"icon-btn\",onClick:()=>handleAddIcon('phone'),title:\"\\u96FB\\u8A71\",children:\"\\uD83D\\uDCDE\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"icon-btn\",onClick:()=>handleAddIcon('email'),title:\"\\u30E1\\u30FC\\u30EB\",children:\"\\u2709\\uFE0F\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"icon-btn\",onClick:()=>handleAddIcon('website'),title:\"\\u30A6\\u30A7\\u30D6\\u30B5\\u30A4\\u30C8\",children:\"\\uD83C\\uDF10\"})]})]}),selectedId&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tool-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u8981\\u7D20\\u7DE8\\u96C6\"}),((_elements$find=elements.find(el=>el.id===selectedId))===null||_elements$find===void 0?void 0:_elements$find.type)==='text'&&/*#__PURE__*/_jsx(\"div\",{className:\"text-editor\",children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:editingText,onChange:e=>setEditingText(e.target.value),onBlur:()=>handleTextEdit(selectedId,editingText),onKeyPress:e=>{if(e.key===\"Enter\"){handleTextEdit(selectedId,editingText);}},placeholder:\"\\u30C6\\u30AD\\u30B9\\u30C8\\u3092\\u5165\\u529B\",className:\"text-input\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tool-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u30B9\\u30BF\\u30A4\\u30EB\\u8A2D\\u5B9A\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"style-controls\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u30D5\\u30A9\\u30F3\\u30C8\\u30B5\\u30A4\\u30BA:\",/*#__PURE__*/_jsx(\"input\",{type:\"range\",min:\"8\",max:\"48\",value:fontSize,onChange:e=>{setFontSize(Number(e.target.value));if(selectedId){const element=elements.find(el=>el.id===selectedId);if(element&&element.type==='text'){handleElementUpdate(selectedId,{fontSize:Number(e.target.value)});}}},className:\"font-size-slider\"}),/*#__PURE__*/_jsxs(\"span\",{children:[fontSize,\"px\"]})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u30D5\\u30A9\\u30F3\\u30C8:\",/*#__PURE__*/_jsxs(\"select\",{value:fontFamily,onChange:e=>{setFontFamily(e.target.value);if(selectedId){const element=elements.find(el=>el.id===selectedId);if(element&&element.type==='text'){handleElementUpdate(selectedId,{fontFamily:e.target.value});}}},className:\"font-family-select\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"Arial\",children:\"Arial\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Helvetica\",children:\"Helvetica\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Times New Roman\",children:\"Times New Roman\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Georgia\",children:\"Georgia\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Verdana\",children:\"Verdana\"})]})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u8272:\",/*#__PURE__*/_jsx(\"input\",{type:\"color\",value:textColor,onChange:e=>{setTextColor(e.target.value);if(selectedId){handleElementUpdate(selectedId,{fill:e.target.value});}},className:\"color-picker\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tool-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u30A2\\u30AF\\u30B7\\u30E7\\u30F3\"}),/*#__PURE__*/_jsx(\"div\",{className:\"action-buttons\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-danger\",onClick:handleDeleteElement,children:\"\\u524A\\u9664\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tool-section\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"\\u30A8\\u30AF\\u30B9\\u30DD\\u30FC\\u30C8\"}),/*#__PURE__*/_jsx(\"div\",{className:\"action-buttons\",children:/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-success\",onClick:handleExportImage,children:\"\\u753B\\u50CF\\u3068\\u3057\\u3066\\u4FDD\\u5B58\"})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"design-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:handleCancel,children:\"\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-primary\",onClick:handleSave,children:\"\\u30C7\\u30B6\\u30A4\\u30F3\\u3092\\u4FDD\\u5B58\"})]})]})]})});};export default BusinessCardDesign;","map":{"version":3,"names":["React","useState","useEffect","useRef","useNavigate","useAuth","Stage","Layer","Rect","Text","Transformer","Circle","Line","Group","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","BusinessCardDesign","_elements$find","user","isAuthenticated","navigate","profile","setProfile","isLoading","setIsLoading","currentSide","setCurrentSide","elements","setElements","selectedId","setSelectedId","editingText","setEditingText","fontSize","setFontSize","textColor","setTextColor","fontFamily","setFontFamily","currentTool","setCurrentTool","showGrid","setShowGrid","showGuidelines","setShowGuidelines","history","setHistory","historyIndex","setHistoryIndex","transformerRef","stageRef","mockProfile","id","userId","company","jobTitle","bio","skills","interests","contactInfo","email","phone","sns","twitter","linkedin","github","instagram","website","isPublic","createdAt","Date","updatedAt","initialElements","type","text","x","y","fill","width","align","draggable","name","addToHistory","current","_stageRef$current","node","findOne","concat","_transformerRef$curre","nodes","getLayer","batchDraw","newElements","newHistory","slice","push","length","undo","newIndex","redo","moveElement","direction","currentIndex","findIndex","el","alignElements","alignment","selectedElement","find","map","newEl","_objectSpread","handleTextClick","element","handleTextEdit","newText","handleElementUpdate","updates","handleAddText","now","handleAddShape","shapeType","newShape","height","stroke","strokeWidth","radius","points","handleAddIcon","iconType","newIcon","size","handleDeleteElement","filter","handleSave","Promise","resolve","setTimeout","console","log","error","handleCancel","handleExportImage","dataURL","toDataURL","link","document","createElement","download","href","click","renderElement","onClick","onTap","onDragEnd","e","target","children","className","title","disabled","ref","onMouseDown","getStage","Array","from","_","i","dash","value","onChange","onBlur","onKeyPress","key","placeholder","min","max","Number"],"sources":["/Users/takahiro/Dev/webhack/src/pages/BusinessCardDesign.tsx"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { Profile } from \"../types\";\nimport { Stage, Layer, Rect, Text, Transformer, Circle, Line, Group } from \"react-konva\";\nimport Konva from \"konva\";\nimport \"./BusinessCardDesign.css\";\n\ninterface TextElement {\n  id: string;\n  type: 'text';\n  text: string;\n  x: number;\n  y: number;\n  fontSize: number;\n  fontFamily: string;\n  fill: string;\n  width: number;\n  align: string;\n  draggable: boolean;\n}\n\ninterface ShapeElement {\n  id: string;\n  type: 'rect' | 'circle' | 'line';\n  x: number;\n  y: number;\n  width?: number;\n  height?: number;\n  radius?: number;\n  points?: number[];\n  fill: string;\n  stroke: string;\n  strokeWidth: number;\n  draggable: boolean;\n}\n\ninterface IconElement {\n  id: string;\n  type: 'icon';\n  iconType: string;\n  x: number;\n  y: number;\n  size: number;\n  fill: string;\n  draggable: boolean;\n}\n\ntype DesignElement = TextElement | ShapeElement | IconElement;\n\nconst BusinessCardDesign: React.FC = () => {\n  const { user, isAuthenticated } = useAuth();\n  const navigate = useNavigate();\n  const [profile, setProfile] = useState<Profile | null>(null);\n  const [isLoading, setIsLoading] = useState(true);\n  const [currentSide, setCurrentSide] = useState<\"front\" | \"back\">(\"front\");\n  const [elements, setElements] = useState<DesignElement[]>([]);\n  const [selectedId, setSelectedId] = useState<string | null>(null);\n  const [editingText, setEditingText] = useState<string>(\"\");\n  const [fontSize, setFontSize] = useState(16);\n  const [textColor, setTextColor] = useState(\"#000000\");\n  const [fontFamily, setFontFamily] = useState(\"Arial\");\n  const [currentTool, setCurrentTool] = useState<'select' | 'text' | 'rect' | 'circle' | 'line' | 'icon'>('select');\n  const [showGrid, setShowGrid] = useState(false);\n  const [showGuidelines, setShowGuidelines] = useState(true);\n  const [history, setHistory] = useState<DesignElement[][]>([]);\n  const [historyIndex, setHistoryIndex] = useState(-1);\n  \n  const transformerRef = useRef<Konva.Transformer>(null);\n  const stageRef = useRef<Konva.Stage>(null);\n\n  useEffect(() => {\n    if (!isAuthenticated) {\n      navigate(\"/login\");\n      return;\n    }\n\n    // モックプロフィールデータを取得\n    const mockProfile: Profile = {\n      id: \"1\",\n      userId: user?.id || \"1\",\n      company: \"テック株式会社\",\n      jobTitle: \"フロントエンドエンジニア\",\n      bio: \"Web開発に携わって5年目です。React、TypeScript、Node.jsを中心に開発を行っています。ユーザビリティを重視した設計を心がけています。\",\n      skills: [\n        \"React\",\n        \"TypeScript\",\n        \"Node.js\",\n        \"CSS\",\n        \"HTML\",\n        \"JavaScript\",\n        \"Git\",\n        \"AWS\",\n      ],\n      interests: [\"プログラミング\", \"読書\", \"旅行\", \"料理\", \"音楽\"],\n      contactInfo: {\n        email: \"taro.tech@example.com\",\n        phone: \"090-1234-5678\",\n        sns: {\n          twitter: \"taro_tech\",\n          linkedin: \"taro-tech\",\n          github: \"taro-tech\",\n          instagram: \"taro_tech_dev\",\n        },\n        website: \"https://taro-tech.dev\",\n      },\n      isPublic: true,\n      createdAt: new Date(\"2024-01-01\"),\n      updatedAt: new Date(),\n    };\n\n    setProfile(mockProfile);\n    setIsLoading(false);\n  }, [isAuthenticated, user, navigate]);\n\n  // 初期テキスト要素を設定\n  useEffect(() => {\n    if (profile) {\n      const initialElements: DesignElement[] =\n        currentSide === \"front\"\n          ? [\n              {\n                id: \"company\",\n                type: \"text\",\n                text: profile.company || \"会社名\",\n                x: 200,\n                y: 60,\n                fontSize: 18,\n                fontFamily: \"Arial\",\n                fill: \"#000000\",\n                width: 400,\n                align: \"center\",\n                draggable: true,\n              },\n              {\n                id: \"jobTitle\",\n                type: \"text\",\n                text: profile.jobTitle || \"役職\",\n                x: 200,\n                y: 90,\n                fontSize: 14,\n                fontFamily: \"Arial\",\n                fill: \"#666666\",\n                width: 400,\n                align: \"center\",\n                draggable: true,\n              },\n              {\n                id: \"name\",\n                type: \"text\",\n                text: user?.name || \"氏名\",\n                x: 200,\n                y: 120,\n                fontSize: 16,\n                fontFamily: \"Arial\",\n                fill: \"#000000\",\n                width: 400,\n                align: \"center\",\n                draggable: true,\n              },\n            ]\n          : [\n              {\n                id: \"email\",\n                type: \"text\",\n                text: profile.contactInfo.email || \"メールアドレス\",\n                x: 200,\n                y: 80,\n                fontSize: 12,\n                fontFamily: \"Arial\",\n                fill: \"#000000\",\n                width: 400,\n                align: \"center\",\n                draggable: true,\n              },\n              {\n                id: \"phone\",\n                type: \"text\",\n                text: profile.contactInfo.phone || \"電話番号\",\n                x: 200,\n                y: 110,\n                fontSize: 12,\n                fontFamily: \"Arial\",\n                fill: \"#000000\",\n                width: 400,\n                align: \"center\",\n                draggable: true,\n              },\n              {\n                id: \"website\",\n                type: \"text\",\n                text: profile.contactInfo.website || \"ウェブサイト\",\n                x: 200,\n                y: 140,\n                fontSize: 12,\n                fontFamily: \"Arial\",\n                fill: \"#000000\",\n                width: 400,\n                align: \"center\",\n                draggable: true,\n              },\n            ];\n\n      setElements(initialElements);\n      addToHistory(initialElements);\n    }\n  }, [profile, currentSide, user]);\n\n  // 選択された要素のTransformerを更新\n  useEffect(() => {\n    if (selectedId && transformerRef.current) {\n      const node = stageRef.current?.findOne(`#${selectedId}`);\n      if (node) {\n        transformerRef.current.nodes([node]);\n        transformerRef.current.getLayer()?.batchDraw();\n      }\n    }\n  }, [selectedId]);\n\n  // 履歴管理\n  const addToHistory = (newElements: DesignElement[]) => {\n    const newHistory = history.slice(0, historyIndex + 1);\n    newHistory.push([...newElements]);\n    setHistory(newHistory);\n    setHistoryIndex(newHistory.length - 1);\n  };\n\n  const undo = () => {\n    if (historyIndex > 0) {\n      const newIndex = historyIndex - 1;\n      setHistoryIndex(newIndex);\n      setElements([...history[newIndex]]);\n    }\n  };\n\n  const redo = () => {\n    if (historyIndex < history.length - 1) {\n      const newIndex = historyIndex + 1;\n      setHistoryIndex(newIndex);\n      setElements([...history[newIndex]]);\n    }\n  };\n\n  const moveElement = (id: string, direction: 'forward' | 'backward') => {\n    const newElements = [...elements];\n    const currentIndex = newElements.findIndex(el => el.id === id);\n    \n    if (direction === 'forward' && currentIndex < newElements.length - 1) {\n      [newElements[currentIndex], newElements[currentIndex + 1]] = \n      [newElements[currentIndex + 1], newElements[currentIndex]];\n    } else if (direction === 'backward' && currentIndex > 0) {\n      [newElements[currentIndex], newElements[currentIndex - 1]] = \n      [newElements[currentIndex - 1], newElements[currentIndex]];\n    }\n    \n    setElements(newElements);\n    addToHistory(newElements);\n  };\n\n  const alignElements = (alignment: 'left' | 'center' | 'right' | 'top' | 'middle' | 'bottom') => {\n    if (selectedId) {\n      const selectedElement = elements.find(el => el.id === selectedId);\n      if (!selectedElement) return;\n\n      const newElements = elements.map(el => {\n        if (el.id === selectedId) {\n          const newEl = { ...el };\n          switch (alignment) {\n            case 'left':\n              newEl.x = 50;\n              break;\n            case 'center':\n              newEl.x = 200;\n              break;\n            case 'right':\n              newEl.x = 350;\n              break;\n            case 'top':\n              newEl.y = 50;\n              break;\n            case 'middle':\n              newEl.y = 121;\n              break;\n            case 'bottom':\n              newEl.y = 192;\n              break;\n          }\n          return newEl;\n        }\n        return el;\n      });\n      \n      setElements(newElements);\n      addToHistory(newElements);\n    }\n  };\n\n  const handleTextClick = (id: string) => {\n    setSelectedId(id);\n    const element = elements.find((el) => el.id === id);\n    if (element && element.type === 'text') {\n      setEditingText(element.text);\n    }\n  };\n\n  const handleTextEdit = (id: string, newText: string) => {\n    const newElements = elements.map((el) =>\n      el.id === id && el.type === 'text' ? { ...el, text: newText } : el\n    );\n    setElements(newElements);\n    addToHistory(newElements);\n    setEditingText(\"\");\n  };\n\n  const handleElementUpdate = (id: string, updates: any) => {\n    const newElements = elements.map((el) =>\n      el.id === id ? { ...el, ...updates } : el\n    );\n    setElements(newElements);\n    addToHistory(newElements);\n  };\n\n  const handleAddText = () => {\n    const newText: TextElement = {\n      id: `text-${Date.now()}`,\n      type: \"text\",\n      text: \"新しいテキスト\",\n      x: 100,\n      y: 100,\n      fontSize: fontSize,\n      fontFamily: fontFamily,\n      fill: textColor,\n      width: 200,\n      align: \"left\",\n      draggable: true,\n    };\n    const newElements = [...elements, newText];\n    setElements(newElements);\n    addToHistory(newElements);\n    setSelectedId(newText.id);\n  };\n\n  const handleAddShape = (shapeType: 'rect' | 'circle' | 'line') => {\n    let newShape: ShapeElement;\n    \n    switch (shapeType) {\n      case 'rect':\n        newShape = {\n          id: `rect-${Date.now()}`,\n          type: 'rect',\n          x: 100,\n          y: 100,\n          width: 100,\n          height: 60,\n          fill: textColor,\n          stroke: '#000000',\n          strokeWidth: 2,\n          draggable: true,\n        };\n        break;\n      case 'circle':\n        newShape = {\n          id: `circle-${Date.now()}`,\n          type: 'circle',\n          x: 150,\n          y: 150,\n          radius: 30,\n          fill: textColor,\n          stroke: '#000000',\n          strokeWidth: 2,\n          draggable: true,\n        };\n        break;\n      case 'line':\n        newShape = {\n          id: `line-${Date.now()}`,\n          type: 'line',\n          x: 100,\n          y: 100,\n          points: [0, 0, 100, 0],\n          fill: '#000000',\n          stroke: '#000000',\n          strokeWidth: 2,\n          draggable: true,\n        };\n        break;\n    }\n    \n    const newElements = [...elements, newShape];\n    setElements(newElements);\n    addToHistory(newElements);\n    setSelectedId(newShape.id);\n  };\n\n  const handleAddIcon = (iconType: string) => {\n    const newIcon: IconElement = {\n      id: `icon-${Date.now()}`,\n      type: 'icon',\n      iconType,\n      x: 100,\n      y: 100,\n      size: 24,\n      fill: textColor,\n      draggable: true,\n    };\n    \n    const newElements = [...elements, newIcon];\n    setElements(newElements);\n    addToHistory(newElements);\n    setSelectedId(newIcon.id);\n  };\n\n  const handleDeleteElement = () => {\n    if (selectedId) {\n      const newElements = elements.filter((el) => el.id !== selectedId);\n      setElements(newElements);\n      addToHistory(newElements);\n      setSelectedId(null);\n    }\n  };\n\n  const handleSave = async () => {\n    try {\n      await new Promise((resolve) => setTimeout(resolve, 1000));\n      console.log(\"名刺デザインを保存しました\");\n      console.log(\"現在の要素:\", elements);\n      navigate(\"/business-card/edit\");\n    } catch (error) {\n      console.error(\"名刺デザインの保存に失敗しました:\", error);\n    }\n  };\n\n  const handleCancel = () => {\n    navigate(\"/business-card/edit\");\n  };\n\n  const handleExportImage = () => {\n    if (stageRef.current) {\n      const dataURL = stageRef.current.toDataURL();\n      const link = document.createElement(\"a\");\n      link.download = `business-card-${currentSide}.png`;\n      link.href = dataURL;\n      link.click();\n    }\n  };\n\n  const renderElement = (element: DesignElement) => {\n    switch (element.type) {\n      case 'text':\n        return (\n          <Text\n            key={element.id}\n            id={element.id}\n            text={element.text}\n            x={element.x}\n            y={element.y}\n            fontSize={element.fontSize}\n            fontFamily={element.fontFamily}\n            fill={element.fill}\n            align={element.align as any}\n            width={element.width}\n            draggable={element.draggable}\n            onClick={() => handleTextClick(element.id)}\n            onTap={() => handleTextClick(element.id)}\n            onDragEnd={(e) => {\n              handleElementUpdate(element.id, {\n                x: e.target.x(),\n                y: e.target.y(),\n              });\n            }}\n          />\n        );\n      case 'rect':\n        return (\n          <Rect\n            key={element.id}\n            id={element.id}\n            x={element.x}\n            y={element.y}\n            width={element.width}\n            height={element.height}\n            fill={element.fill}\n            stroke={element.stroke}\n            strokeWidth={element.strokeWidth}\n            draggable={element.draggable}\n            onClick={() => setSelectedId(element.id)}\n            onTap={() => setSelectedId(element.id)}\n            onDragEnd={(e) => {\n              handleElementUpdate(element.id, {\n                x: e.target.x(),\n                y: e.target.y(),\n              });\n            }}\n          />\n        );\n      case 'circle':\n        return (\n          <Circle\n            key={element.id}\n            id={element.id}\n            x={element.x}\n            y={element.y}\n            radius={element.radius}\n            fill={element.fill}\n            stroke={element.stroke}\n            strokeWidth={element.strokeWidth}\n            draggable={element.draggable}\n            onClick={() => setSelectedId(element.id)}\n            onTap={() => setSelectedId(element.id)}\n            onDragEnd={(e) => {\n              handleElementUpdate(element.id, {\n                x: e.target.x(),\n                y: e.target.y(),\n              });\n            }}\n          />\n        );\n      case 'line':\n        return (\n          <Line\n            key={element.id}\n            id={element.id}\n            x={element.x}\n            y={element.y}\n            points={element.points}\n            fill={element.fill}\n            stroke={element.stroke}\n            strokeWidth={element.strokeWidth}\n            draggable={element.draggable}\n            onClick={() => setSelectedId(element.id)}\n            onTap={() => setSelectedId(element.id)}\n            onDragEnd={(e) => {\n              handleElementUpdate(element.id, {\n                x: e.target.x(),\n                y: e.target.y(),\n              });\n            }}\n          />\n        );\n      case 'icon':\n        return (\n          <Group\n            key={element.id}\n            id={element.id}\n            x={element.x}\n            y={element.y}\n            draggable={element.draggable}\n            onClick={() => setSelectedId(element.id)}\n            onTap={() => setSelectedId(element.id)}\n            onDragEnd={(e) => {\n              handleElementUpdate(element.id, {\n                x: e.target.x(),\n                y: e.target.y(),\n              });\n            }}\n          >\n            {element.iconType === 'phone' && (\n              <Rect x={0} y={0} width={element.size} height={element.size * 1.6} fill={element.fill} />\n            )}\n            {element.iconType === 'email' && (\n              <Rect x={0} y={0} width={element.size} height={element.size * 0.8} fill={element.fill} />\n            )}\n            {element.iconType === 'website' && (\n              <Circle x={element.size/2} y={element.size/2} radius={element.size/2} fill={element.fill} />\n            )}\n          </Group>\n        );\n      default:\n        return null;\n    }\n  };\n\n  if (isLoading) {\n    return (\n      <div className=\"business-card-design\">\n        <div className=\"container\">\n          <div className=\"loading\">読み込み中...</div>\n        </div>\n      </div>\n    );\n  }\n\n  if (!profile) {\n    return (\n      <div className=\"business-card-design\">\n        <div className=\"container\">\n          <div className=\"error\">プロフィールが見つかりません</div>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"business-card-design\">\n      <div className=\"container\">\n        <div className=\"design-header\">\n          <h1>名刺デザイン</h1>\n          <p>名刺の表面・裏面をデザインできます</p>\n        </div>\n\n        <div className=\"design-container\">\n          {/* サイド選択タブ */}\n          <div className=\"side-tabs\">\n            <button\n              className={`side-tab ${currentSide === \"front\" ? \"active\" : \"\"}`}\n              onClick={() => setCurrentSide(\"front\")}\n            >\n              表面\n            </button>\n            <button\n              className={`side-tab ${currentSide === \"back\" ? \"active\" : \"\"}`}\n              onClick={() => setCurrentSide(\"back\")}\n            >\n              裏面\n            </button>\n          </div>\n\n          {/* ツールバー */}\n          <div className=\"design-toolbar\">\n            <div className=\"toolbar-group\">\n              <button\n                className={`toolbar-btn ${currentTool === 'select' ? 'active' : ''}`}\n                onClick={() => setCurrentTool('select')}\n                title=\"選択\"\n              >\n                ✋\n              </button>\n              <button\n                className={`toolbar-btn ${currentTool === 'text' ? 'active' : ''}`}\n                onClick={() => setCurrentTool('text')}\n                title=\"テキスト\"\n              >\n                T\n              </button>\n              <button\n                className={`toolbar-btn ${currentTool === 'rect' ? 'active' : ''}`}\n                onClick={() => setCurrentTool('rect')}\n                title=\"四角形\"\n              >\n                □\n              </button>\n              <button\n                className={`toolbar-btn ${currentTool === 'circle' ? 'active' : ''}`}\n                onClick={() => setCurrentTool('circle')}\n                title=\"円\"\n              >\n                ○\n              </button>\n              <button\n                className={`toolbar-btn ${currentTool === 'line' ? 'active' : ''}`}\n                onClick={() => setCurrentTool('line')}\n                title=\"線\"\n              >\n                /\n              </button>\n            </div>\n\n            <div className=\"toolbar-group\">\n              <button\n                className=\"toolbar-btn\"\n                onClick={undo}\n                disabled={historyIndex <= 0}\n                title=\"元に戻す\"\n              >\n                ↶\n              </button>\n              <button\n                className=\"toolbar-btn\"\n                onClick={redo}\n                disabled={historyIndex >= history.length - 1}\n                title=\"やり直し\"\n              >\n                ↷\n              </button>\n            </div>\n\n            <div className=\"toolbar-group\">\n              <button\n                className=\"toolbar-btn\"\n                onClick={() => selectedId && moveElement(selectedId, 'forward')}\n                disabled={!selectedId}\n                title=\"前面へ\"\n              >\n                ⬆\n              </button>\n              <button\n                className=\"toolbar-btn\"\n                onClick={() => selectedId && moveElement(selectedId, 'backward')}\n                disabled={!selectedId}\n                title=\"背面へ\"\n              >\n                ⬇\n              </button>\n            </div>\n\n            <div className=\"toolbar-group\">\n              <button\n                className={`toolbar-btn ${showGrid ? 'active' : ''}`}\n                onClick={() => setShowGrid(!showGrid)}\n                title=\"グリッド\"\n              >\n                #\n              </button>\n              <button\n                className={`toolbar-btn ${showGuidelines ? 'active' : ''}`}\n                onClick={() => setShowGuidelines(!showGuidelines)}\n                title=\"ガイドライン\"\n              >\n                ⊞\n              </button>\n            </div>\n\n            <div className=\"toolbar-group\">\n              <button\n                className=\"toolbar-btn\"\n                onClick={() => alignElements('left')}\n                disabled={!selectedId}\n                title=\"左揃え\"\n              >\n                ⬅\n              </button>\n              <button\n                className=\"toolbar-btn\"\n                onClick={() => alignElements('center')}\n                disabled={!selectedId}\n                title=\"中央揃え\"\n              >\n                ↔\n              </button>\n              <button\n                className=\"toolbar-btn\"\n                onClick={() => alignElements('right')}\n                disabled={!selectedId}\n                title=\"右揃え\"\n              >\n                ➡\n              </button>\n            </div>\n          </div>\n\n          <div className=\"design-workspace\">\n            {/* デザインエディター */}\n            <div className=\"editor-container\">\n              <div className=\"editor-wrapper\">\n                <Stage\n                  ref={stageRef}\n                  width={400}\n                  height={242}\n                  onMouseDown={(e) => {\n                    if (e.target === e.target.getStage()) {\n                      setSelectedId(null);\n                    }\n                  }}\n                >\n                  <Layer>\n                    {/* 背景 */}\n                    <Rect\n                      x={0}\n                      y={0}\n                      width={400}\n                      height={242}\n                      fill=\"#ffffff\"\n                      stroke=\"#e5e7eb\"\n                      strokeWidth={1}\n                    />\n\n                    {/* グリッド */}\n                    {showGrid && (\n                      <>\n                        {Array.from({ length: 20 }, (_, i) => (\n                          <Line\n                            key={`grid-v-${i}`}\n                            x={i * 20}\n                            y={0}\n                            points={[0, 0, 0, 242]}\n                            stroke=\"#f0f0f0\"\n                            strokeWidth={1}\n                          />\n                        ))}\n                        {Array.from({ length: 13 }, (_, i) => (\n                          <Line\n                            key={`grid-h-${i}`}\n                            x={0}\n                            y={i * 20}\n                            points={[0, 0, 400, 0]}\n                            stroke=\"#f0f0f0\"\n                            strokeWidth={1}\n                          />\n                        ))}\n                      </>\n                    )}\n\n                    {/* ガイドライン */}\n                    {showGuidelines && (\n                      <>\n                        <Line x={200} y={0} points={[0, 0, 0, 242]} stroke=\"#3b82f6\" strokeWidth={1} dash={[5, 5]} />\n                        <Line x={0} y={121} points={[0, 0, 400, 0]} stroke=\"#3b82f6\" strokeWidth={1} dash={[5, 5]} />\n                      </>\n                    )}\n\n                    {/* デザイン要素 */}\n                    {elements.map(renderElement)}\n\n                    {/* Transformer */}\n                    <Transformer ref={transformerRef} />\n                  </Layer>\n                </Stage>\n              </div>\n            </div>\n\n            {/* デザインツール */}\n            <div className=\"design-tools\">\n              <div className=\"tool-section\">\n                <h3>ツール</h3>\n                <div className=\"tool-buttons\">\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-secondary\"\n                    onClick={() => handleAddText()}\n                  >\n                    テキスト追加\n                  </button>\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-secondary\"\n                    onClick={() => handleAddShape('rect')}\n                  >\n                    四角形追加\n                  </button>\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-secondary\"\n                    onClick={() => handleAddShape('circle')}\n                  >\n                    円追加\n                  </button>\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-secondary\"\n                    onClick={() => handleAddShape('line')}\n                  >\n                    線追加\n                  </button>\n                </div>\n              </div>\n\n              <div className=\"tool-section\">\n                <h3>アイコン</h3>\n                <div className=\"icon-buttons\">\n                  <button\n                    type=\"button\"\n                    className=\"icon-btn\"\n                    onClick={() => handleAddIcon('phone')}\n                    title=\"電話\"\n                  >\n                    📞\n                  </button>\n                  <button\n                    type=\"button\"\n                    className=\"icon-btn\"\n                    onClick={() => handleAddIcon('email')}\n                    title=\"メール\"\n                  >\n                    ✉️\n                  </button>\n                  <button\n                    type=\"button\"\n                    className=\"icon-btn\"\n                    onClick={() => handleAddIcon('website')}\n                    title=\"ウェブサイト\"\n                  >\n                    🌐\n                  </button>\n                </div>\n              </div>\n\n              {selectedId && (\n                <>\n                  <div className=\"tool-section\">\n                    <h3>要素編集</h3>\n                    {elements.find(el => el.id === selectedId)?.type === 'text' && (\n                      <div className=\"text-editor\">\n                        <input\n                          type=\"text\"\n                          value={editingText}\n                          onChange={(e) => setEditingText(e.target.value)}\n                          onBlur={() => handleTextEdit(selectedId, editingText)}\n                          onKeyPress={(e) => {\n                            if (e.key === \"Enter\") {\n                              handleTextEdit(selectedId, editingText);\n                            }\n                          }}\n                          placeholder=\"テキストを入力\"\n                          className=\"text-input\"\n                        />\n                      </div>\n                    )}\n                  </div>\n\n                  <div className=\"tool-section\">\n                    <h3>スタイル設定</h3>\n                    <div className=\"style-controls\">\n                      <label>\n                        フォントサイズ:\n                        <input\n                          type=\"range\"\n                          min=\"8\"\n                          max=\"48\"\n                          value={fontSize}\n                          onChange={(e) => {\n                            setFontSize(Number(e.target.value));\n                            if (selectedId) {\n                              const element = elements.find(el => el.id === selectedId);\n                              if (element && element.type === 'text') {\n                                handleElementUpdate(selectedId, {\n                                  fontSize: Number(e.target.value),\n                                });\n                              }\n                            }\n                          }}\n                          className=\"font-size-slider\"\n                        />\n                        <span>{fontSize}px</span>\n                      </label>\n\n                      <label>\n                        フォント:\n                        <select\n                          value={fontFamily}\n                          onChange={(e) => {\n                            setFontFamily(e.target.value);\n                            if (selectedId) {\n                              const element = elements.find(el => el.id === selectedId);\n                              if (element && element.type === 'text') {\n                                handleElementUpdate(selectedId, {\n                                  fontFamily: e.target.value,\n                                });\n                              }\n                            }\n                          }}\n                          className=\"font-family-select\"\n                        >\n                          <option value=\"Arial\">Arial</option>\n                          <option value=\"Helvetica\">Helvetica</option>\n                          <option value=\"Times New Roman\">Times New Roman</option>\n                          <option value=\"Georgia\">Georgia</option>\n                          <option value=\"Verdana\">Verdana</option>\n                        </select>\n                      </label>\n\n                      <label>\n                        色:\n                        <input\n                          type=\"color\"\n                          value={textColor}\n                          onChange={(e) => {\n                            setTextColor(e.target.value);\n                            if (selectedId) {\n                              handleElementUpdate(selectedId, {\n                                fill: e.target.value,\n                              });\n                            }\n                          }}\n                          className=\"color-picker\"\n                        />\n                      </label>\n                    </div>\n                  </div>\n\n                  <div className=\"tool-section\">\n                    <h3>アクション</h3>\n                    <div className=\"action-buttons\">\n                      <button\n                        type=\"button\"\n                        className=\"btn btn-danger\"\n                        onClick={handleDeleteElement}\n                      >\n                        削除\n                      </button>\n                    </div>\n                  </div>\n                </>\n              )}\n\n              <div className=\"tool-section\">\n                <h3>エクスポート</h3>\n                <div className=\"action-buttons\">\n                  <button\n                    type=\"button\"\n                    className=\"btn btn-success\"\n                    onClick={handleExportImage}\n                  >\n                    画像として保存\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          {/* アクションボタン */}\n          <div className=\"design-actions\">\n            <button\n              type=\"button\"\n              className=\"btn btn-secondary\"\n              onClick={handleCancel}\n            >\n              キャンセル\n            </button>\n            <button\n              type=\"button\"\n              className=\"btn btn-primary\"\n              onClick={handleSave}\n            >\n              デザインを保存\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default BusinessCardDesign;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}