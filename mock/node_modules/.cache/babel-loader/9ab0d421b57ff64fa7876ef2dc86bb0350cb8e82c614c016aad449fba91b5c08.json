{"ast":null,"code":"import _objectSpread from\"/Users/takahiro/Dev/webhack/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from\"react\";import{useNavigate}from\"react-router-dom\";import{useAuth}from\"../contexts/AuthContext\";import\"./ChangeEmail.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ChangeEmail=()=>{const{user}=useAuth();const navigate=useNavigate();const[formData,setFormData]=useState({currentEmail:(user===null||user===void 0?void 0:user.email)||\"\",newEmail:\"\",password:\"\"});const[isSaving,setIsSaving]=useState(false);const[errors,setErrors]=useState({});const handleInputChange=(field,value)=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[field]:value}));// エラーをクリア\nif(errors[field]){setErrors(_objectSpread(_objectSpread({},errors),{},{[field]:undefined}));}};const validateForm=()=>{const newErrors={};if(!formData.currentEmail.trim()){newErrors.currentEmail=\"現在のメールアドレスを入力してください\";}if(!formData.newEmail.trim()){newErrors.newEmail=\"新しいメールアドレスを入力してください\";}else if(!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.newEmail)){newErrors.newEmail=\"有効なメールアドレスを入力してください\";}if(!formData.password.trim()){newErrors.password=\"パスワードを入力してください\";}setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleSubmit=async e=>{e.preventDefault();if(!validateForm()){return;}setIsSaving(true);try{// モックAPI呼び出し\nawait new Promise(resolve=>setTimeout(resolve,1000));// 成功時の処理\nconsole.log(\"メールアドレスを変更しました:\",formData);navigate(\"/settings\");}catch(error){console.error(\"メールアドレスの変更に失敗しました:\",error);}finally{setIsSaving(false);}};const handleCancel=()=>{navigate(\"/settings\");};return/*#__PURE__*/_jsx(\"div\",{className:\"change-email\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"edit-form\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-header\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"form-title\",children:\"\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\\u5909\\u66F4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"form-description\",children:\"\\u65B0\\u3057\\u3044\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\\u306B\\u5909\\u66F4\\u3059\\u308B\\u306B\\u306F\\u3001\\u73FE\\u5728\\u306E\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\u306E\\u5165\\u529B\\u304C\\u5FC5\\u8981\\u3067\\u3059\\u3002\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"currentEmail\",children:\"\\u73FE\\u5728\\u306E\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"currentEmail\",value:formData.currentEmail,onChange:e=>handleInputChange(\"currentEmail\",e.target.value),placeholder:\"\\u73FE\\u5728\\u306E\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\",disabled:true,className:\"readonly-field\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"newEmail\",children:\"\\u65B0\\u3057\\u3044\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"newEmail\",value:formData.newEmail,onChange:e=>handleInputChange(\"newEmail\",e.target.value),placeholder:\"\\u65B0\\u3057\\u3044\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\",className:errors.newEmail?\"error\":\"\"}),errors.newEmail&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:errors.newEmail})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",value:formData.password,onChange:e=>handleInputChange(\"password\",e.target.value),placeholder:\"\\u73FE\\u5728\\u306E\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\",className:errors.password?\"error\":\"\"}),errors.password&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:errors.password})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-actions\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn btn-secondary\",onClick:handleCancel,disabled:isSaving,children:\"\\u30AD\\u30E3\\u30F3\\u30BB\\u30EB\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",disabled:isSaving,children:isSaving?\"変更中...\":\"変更する\"})]})]})]})})});};export default ChangeEmail;","map":{"version":3,"names":["React","useState","useNavigate","useAuth","jsx","_jsx","jsxs","_jsxs","ChangeEmail","user","navigate","formData","setFormData","currentEmail","email","newEmail","password","isSaving","setIsSaving","errors","setErrors","handleInputChange","field","value","_objectSpread","undefined","validateForm","newErrors","trim","test","Object","keys","length","handleSubmit","e","preventDefault","Promise","resolve","setTimeout","console","log","error","handleCancel","className","children","onSubmit","htmlFor","type","id","onChange","target","placeholder","disabled","onClick"],"sources":["/Users/takahiro/Dev/webhack/src/pages/ChangeEmail.tsx"],"sourcesContent":["import React, { useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport { ChangeEmailForm } from \"../types\";\nimport \"./ChangeEmail.css\";\n\nconst ChangeEmail: React.FC = () => {\n  const { user } = useAuth();\n  const navigate = useNavigate();\n  const [formData, setFormData] = useState<ChangeEmailForm>({\n    currentEmail: user?.email || \"\",\n    newEmail: \"\",\n    password: \"\",\n  });\n  const [isSaving, setIsSaving] = useState(false);\n  const [errors, setErrors] = useState<Partial<ChangeEmailForm>>({});\n\n  const handleInputChange = (field: keyof ChangeEmailForm, value: string) => {\n    setFormData({\n      ...formData,\n      [field]: value,\n    });\n    // エラーをクリア\n    if (errors[field]) {\n      setErrors({\n        ...errors,\n        [field]: undefined,\n      });\n    }\n  };\n\n  const validateForm = (): boolean => {\n    const newErrors: Partial<ChangeEmailForm> = {};\n\n    if (!formData.currentEmail.trim()) {\n      newErrors.currentEmail = \"現在のメールアドレスを入力してください\";\n    }\n\n    if (!formData.newEmail.trim()) {\n      newErrors.newEmail = \"新しいメールアドレスを入力してください\";\n    } else if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.newEmail)) {\n      newErrors.newEmail = \"有効なメールアドレスを入力してください\";\n    }\n\n    if (!formData.password.trim()) {\n      newErrors.password = \"パスワードを入力してください\";\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n\n    if (!validateForm()) {\n      return;\n    }\n\n    setIsSaving(true);\n\n    try {\n      // モックAPI呼び出し\n      await new Promise((resolve) => setTimeout(resolve, 1000));\n\n      // 成功時の処理\n      console.log(\"メールアドレスを変更しました:\", formData);\n      navigate(\"/settings\");\n    } catch (error) {\n      console.error(\"メールアドレスの変更に失敗しました:\", error);\n    } finally {\n      setIsSaving(false);\n    }\n  };\n\n  const handleCancel = () => {\n    navigate(\"/settings\");\n  };\n\n  return (\n    <div className=\"change-email\">\n      <div className=\"container\">\n        <div className=\"edit-form\">\n          <div className=\"form-header\">\n            <h2 className=\"form-title\">メールアドレス変更</h2>\n            <p className=\"form-description\">\n              新しいメールアドレスに変更するには、現在のパスワードの入力が必要です。\n            </p>\n          </div>\n\n          <form onSubmit={handleSubmit}>\n            {/* 現在のメールアドレス */}\n            <div className=\"form-group\">\n              <label htmlFor=\"currentEmail\">現在のメールアドレス</label>\n              <input\n                type=\"email\"\n                id=\"currentEmail\"\n                value={formData.currentEmail}\n                onChange={(e) => handleInputChange(\"currentEmail\", e.target.value)}\n                placeholder=\"現在のメールアドレス\"\n                disabled\n                className=\"readonly-field\"\n              />\n            </div>\n\n            {/* 新しいメールアドレス */}\n            <div className=\"form-group\">\n              <label htmlFor=\"newEmail\">新しいメールアドレス</label>\n              <input\n                type=\"email\"\n                id=\"newEmail\"\n                value={formData.newEmail}\n                onChange={(e) => handleInputChange(\"newEmail\", e.target.value)}\n                placeholder=\"新しいメールアドレス\"\n                className={errors.newEmail ? \"error\" : \"\"}\n              />\n              {errors.newEmail && (\n                <div className=\"error-message\">{errors.newEmail}</div>\n              )}\n            </div>\n\n            {/* パスワード */}\n            <div className=\"form-group\">\n              <label htmlFor=\"password\">パスワード</label>\n              <input\n                type=\"password\"\n                id=\"password\"\n                value={formData.password}\n                onChange={(e) => handleInputChange(\"password\", e.target.value)}\n                placeholder=\"現在のパスワード\"\n                className={errors.password ? \"error\" : \"\"}\n              />\n              {errors.password && (\n                <div className=\"error-message\">{errors.password}</div>\n              )}\n            </div>\n\n            {/* ボタン */}\n            <div className=\"form-actions\">\n              <button\n                type=\"button\"\n                className=\"btn btn-secondary\"\n                onClick={handleCancel}\n                disabled={isSaving}\n              >\n                キャンセル\n              </button>\n              <button\n                type=\"submit\"\n                className=\"btn btn-primary\"\n                disabled={isSaving}\n              >\n                {isSaving ? \"変更中...\" : \"変更する\"}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ChangeEmail;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}