{"ast":null,"code":"import _objectSpread from\"/Users/takahiro/Dev/webhack/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import{useAuth}from\"../contexts/AuthContext\";import\"./Auth.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Login=()=>{const[formData,setFormData]=useState({email:\"\",password:\"\",rememberMe:false});const[errors,setErrors]=useState({});const{login,isLoading,error,clearError,isAuthenticated}=useAuth();const navigate=useNavigate();useEffect(()=>{if(isAuthenticated){navigate(\"/mypage\");}},[isAuthenticated,navigate]);useEffect(()=>{if(error){setErrors({general:error});}},[error]);const handleInputChange=e=>{const{name,value,type,checked}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:type===\"checkbox\"?checked:value}));// エラーをクリア\nif(errors[name]){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:\"\"}));}};const validateForm=()=>{const newErrors={};if(!formData.email){newErrors.email=\"メールアドレスを入力してください\";}else if(!/\\S+@\\S+\\.\\S+/.test(formData.email)){newErrors.email=\"有効なメールアドレスを入力してください\";}if(!formData.password){newErrors.password=\"パスワードを入力してください\";}setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleSubmit=async e=>{e.preventDefault();clearError();if(!validateForm()){return;}try{await login(formData);}catch(error){// エラーハンドリングはAuthContextで行われる\n}};return/*#__PURE__*/_jsx(\"div\",{className:\"auth-page\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"auth-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"auth-header\",children:/*#__PURE__*/_jsx(\"h1\",{children:\"\\u30ED\\u30B0\\u30A4\\u30F3\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"auth-form\",children:[errors.general&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:errors.general}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"form-label\",children:\"\\u30E1\\u30FC\\u30EB\\u30A2\\u30C9\\u30EC\\u30B9\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",value:formData.email,onChange:handleInputChange,className:\"form-input \".concat(errors.email?\"error\":\"\"),placeholder:\"example@email.com\"}),errors.email&&/*#__PURE__*/_jsx(\"span\",{className:\"error-text\",children:errors.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"form-label\",children:\"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",value:formData.password,onChange:handleInputChange,className:\"form-input \".concat(errors.password?\"error\":\"\"),placeholder:\"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\u3092\\u5165\\u529B\"}),errors.password&&/*#__PURE__*/_jsx(\"span\",{className:\"error-text\",children:errors.password})]}),/*#__PURE__*/_jsx(\"div\",{className:\"form-group checkbox-group\",children:/*#__PURE__*/_jsxs(\"label\",{className:\"checkbox-label\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",name:\"rememberMe\",checked:formData.rememberMe,onChange:handleInputChange}),/*#__PURE__*/_jsx(\"span\",{children:\"\\u30ED\\u30B0\\u30A4\\u30F3\\u72B6\\u614B\\u3092\\u4FDD\\u6301\\u3059\\u308B\"})]})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary auth-submit\",disabled:isLoading,children:isLoading?\"ログイン中...\":\"ログイン\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"auth-footer\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u30A2\\u30AB\\u30A6\\u30F3\\u30C8\\u3092\\u304A\\u6301\\u3061\\u3067\\u306A\\u3044\\u65B9\\u306F\",/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"auth-link\",children:\"\\u65B0\\u898F\\u767B\\u9332\"})]}),/*#__PURE__*/_jsx(Link,{to:\"/forgot-password\",className:\"auth-link\",children:\"\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\u3092\\u5FD8\\u308C\\u305F\\u65B9\"})]})]})})});};export default Login;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","useAuth","jsx","_jsx","jsxs","_jsxs","Login","formData","setFormData","email","password","rememberMe","errors","setErrors","login","isLoading","error","clearError","isAuthenticated","navigate","general","handleInputChange","e","name","value","type","checked","target","prev","_objectSpread","validateForm","newErrors","test","Object","keys","length","handleSubmit","preventDefault","className","children","onSubmit","htmlFor","id","onChange","concat","placeholder","disabled","to"],"sources":["/Users/takahiro/Dev/webhack/src/pages/Login.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { Link, useNavigate } from \"react-router-dom\";\nimport { useAuth } from \"../contexts/AuthContext\";\nimport \"./Auth.css\";\n\nconst Login: React.FC = () => {\n  const [formData, setFormData] = useState({\n    email: \"\",\n    password: \"\",\n    rememberMe: false,\n  });\n  const [errors, setErrors] = useState<{ [key: string]: string }>({});\n\n  const { login, isLoading, error, clearError, isAuthenticated } = useAuth();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    if (isAuthenticated) {\n      navigate(\"/mypage\");\n    }\n  }, [isAuthenticated, navigate]);\n\n  useEffect(() => {\n    if (error) {\n      setErrors({ general: error });\n    }\n  }, [error]);\n\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const { name, value, type, checked } = e.target;\n    setFormData((prev) => ({\n      ...prev,\n      [name]: type === \"checkbox\" ? checked : value,\n    }));\n\n    // エラーをクリア\n    if (errors[name]) {\n      setErrors((prev) => ({ ...prev, [name]: \"\" }));\n    }\n  };\n\n  const validateForm = () => {\n    const newErrors: { [key: string]: string } = {};\n\n    if (!formData.email) {\n      newErrors.email = \"メールアドレスを入力してください\";\n    } else if (!/\\S+@\\S+\\.\\S+/.test(formData.email)) {\n      newErrors.email = \"有効なメールアドレスを入力してください\";\n    }\n\n    if (!formData.password) {\n      newErrors.password = \"パスワードを入力してください\";\n    }\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    clearError();\n\n    if (!validateForm()) {\n      return;\n    }\n\n    try {\n      await login(formData);\n    } catch (error) {\n      // エラーハンドリングはAuthContextで行われる\n    }\n  };\n\n  return (\n    <div className=\"auth-page\">\n      <div className=\"container\">\n        <div className=\"auth-container\">\n          <div className=\"auth-header\">\n            <h1>ログイン</h1>\n          </div>\n\n          <form onSubmit={handleSubmit} className=\"auth-form\">\n            {errors.general && (\n              <div className=\"error-message\">{errors.general}</div>\n            )}\n\n            <div className=\"form-group\">\n              <label htmlFor=\"email\" className=\"form-label\">\n                メールアドレス\n              </label>\n              <input\n                type=\"email\"\n                id=\"email\"\n                name=\"email\"\n                value={formData.email}\n                onChange={handleInputChange}\n                className={`form-input ${errors.email ? \"error\" : \"\"}`}\n                placeholder=\"example@email.com\"\n              />\n              {errors.email && (\n                <span className=\"error-text\">{errors.email}</span>\n              )}\n            </div>\n\n            <div className=\"form-group\">\n              <label htmlFor=\"password\" className=\"form-label\">\n                パスワード\n              </label>\n              <input\n                type=\"password\"\n                id=\"password\"\n                name=\"password\"\n                value={formData.password}\n                onChange={handleInputChange}\n                className={`form-input ${errors.password ? \"error\" : \"\"}`}\n                placeholder=\"パスワードを入力\"\n              />\n              {errors.password && (\n                <span className=\"error-text\">{errors.password}</span>\n              )}\n            </div>\n\n            <div className=\"form-group checkbox-group\">\n              <label className=\"checkbox-label\">\n                <input\n                  type=\"checkbox\"\n                  name=\"rememberMe\"\n                  checked={formData.rememberMe}\n                  onChange={handleInputChange}\n                />\n                <span>ログイン状態を保持する</span>\n              </label>\n            </div>\n\n            <button\n              type=\"submit\"\n              className=\"btn btn-primary auth-submit\"\n              disabled={isLoading}\n            >\n              {isLoading ? \"ログイン中...\" : \"ログイン\"}\n            </button>\n          </form>\n\n          <div className=\"auth-footer\">\n            <p>\n              アカウントをお持ちでない方は\n              <Link to=\"/register\" className=\"auth-link\">\n                新規登録\n              </Link>\n            </p>\n            <Link to=\"/forgot-password\" className=\"auth-link\">\n              パスワードを忘れた方\n            </Link>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}